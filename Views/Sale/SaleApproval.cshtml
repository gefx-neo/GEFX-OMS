@using DataAccess
@using DataAccess.POCO

@{
	Layout = "~/Views/Shared/_Layout.cshtml";
	ViewBag.Title = ViewData["SiteName"].ToString();
	ViewBag.PageTitle = "Edit Sale";
	ViewBag.ManageSales = "active open";
}

<style>

/* This only works with JavaScript,
if it's not present, don't show loader */

.preload {
	position: fixed;
	left: 0px;
	top: 0px;
	width: 100%;
	height: 100%;
	z-index: 9999;
	background: url('@Url.Content("~/Content/images/Preloader_2.gif")') center no-repeat #fff;
    opacity: 0.7;
}

	.non-active {
		pointer-events: none;
		cursor: default;
	}

    .field-validation-error{
    display:inline-block!important;
}
</style>

<div class="preload" style="display:none;"></div>

<div class="panel">
	<div class="panel-body container-fluid">
		<div class="row row-lg">
            <div class="col-xlg-12 col-md-12">
                @if (TempData["Result"] != null)
                {
                    string[] result = TempData["Result"].ToString().Split('|');

                    <div class="alert alert-@result[0]">
                        <button type="button" class="close" data-dismiss="alert">&times;</button>
                        @result[1]
                    </div>
                }

                @using (Html.BeginForm("SaleApproval", "Sale", new { @module = ViewData["Module"].ToString() }, FormMethod.Post, new { @class = "form-horizontal", @id = "form-edit" }))
                {
                    Sale sales = (Sale)ViewData["Sale"];

                    <input type="hidden" id="PendingChequeLog" name="PendingChequeLog" value="@ViewData["PendingChequeLog"].ToString()">
                    <input type="hidden" id="PendingBankTransferLog" name="PendingBankTransferLog" value="@ViewData["PendingBankTransferLog"].ToString()">

                    <input type="hidden" id="PendingLocalCheque1Log" name="PendingLocalCheque1Log" value="@ViewData["PendingLocalCheque1Log"].ToString()">
                    <input type="hidden" id="PendingLocalCheque2Log" name="PendingLocalCheque2Log" value="@ViewData["PendingLocalCheque2Log"].ToString()">
                    <input type="hidden" id="PendingLocalCheque3Log" name="PendingLocalCheque3Log" value="@ViewData["PendingLocalCheque3Log"].ToString()">
                    <input type="hidden" id="PendingLocalBankTransferLog" name="PendingLocalBankTransferLog" value="@ViewData["PendingLocalBankTransferLog"].ToString()">
                    
                    <div class="form-group">
                        @Html.LabelFor(s => sales.MemoID, new { @class = "col-sm-3 control-label" })
                        <div class="col-sm-9">
                            @Html.TextBoxFor(s => sales.MemoID, new { @class = "form-control", @placeholder = "ID will be Assigned after Creation", @disabled = "disabled" })
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(s => sales.CustomerParticularId, new { @class = "col-sm-3 control-label" })
                        <div class="col-sm-9">
                            @Html.DropDownListFor(s => sales.CustomerParticularId, (SelectList)ViewData["CustomerDropdown"], new { @class = "form-control", @data_plugin = "select2", @data_placeholder = "Search by Customer Name or Company Name", @data_allow_clear = "true", @disabled = "disabled" })
                            @Html.ValidationMessageFor(s => sales.CustomerParticularId)
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.Label("Contact:", new { @class = "col-sm-3 control-label" })
                        <div class="col-sm-9">
                            @Html.TextBox("CustomerContact", ViewData["CustomerContact"].ToString(), new { @class = "form-control", @disabled = "disabled" })
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.Label("Address:", new { @class = "col-sm-3 control-label" })
                        <div class="col-sm-9">
                            @Html.TextBox("CustomerAddress", ViewData["CustomerAddress"].ToString(), new { @class = "form-control", @disabled = "disabled" })
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(s => sales.IssueDate, new { @class = "col-sm-3 control-label" })
                        <div class="col-sm-9">
                            @Html.TextBoxFor(s => sales.IssueDate, "{0:dd/MM/yyyy}", new { @class = "form-control", @disabled = "disabled" })
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(s => sales.CollectionDate, new { @class = "col-sm-3 control-label" })
                        <div class="col-sm-9">
                            <div class="input-group" style="float:left;width:50%;">
                                <span class="input-group-addon" style="border-radius:0;">
                                    <i class="icon wb-calendar" aria-hidden="true"></i>
                                </span>
                                @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Packing")
                                {
                                    @Html.TextBoxFor(s => sales.CollectionDate, "{0:dd/MM/yyyy dddd}", new { @class = "form-control" })
                                }
                                else
                                {
                                    @Html.TextBoxFor(s => sales.CollectionDate, "{0:dd/MM/yyyy dddd}", new { @class = "form-control", @disabled = "disabled" })
                                }
                            </div>
                            <div class="input-group" style="float:left;width:50%;">
                                <span class="input-group-addon" style="border-radius:0;border-left-width:0px;">
                                    <i class="icon wb-time" aria-hidden="true"></i>
                                </span>
                                @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Packing")
                                {
                                    @Html.TextBoxFor(s => sales.CollectionTime, new { @class = "form-control", @maxlength = "40" })
                                    @*@Html.DropDownListFor(s => sales.CollectionTime, (SelectList)ViewData["CollectionTimeDropdown"], new { @class = "form-control" })*@
                                }
                                else
                                {
                                    @Html.TextBoxFor(s => sales.CollectionTime, new { @class = "form-control", @disabled = "disabled" })
                                    @*@Html.DropDownListFor(s => sales.CollectionTime, (SelectList)ViewData["CollectionTimeDropdown"], new { @class = "form-control", @disabled = "disabled" })*@
                                }
                            </div>
                        </div>
                        <div class="col-sm-9 col-sm-offset-3">
                            <div class="col-sm-6">
                                @Html.ValidationMessageFor(s => sales.CollectionDate)
                            </div>
                            <div class="col-sm-6">
                                @Html.ValidationMessageFor(s => sales.CollectionTime)
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(s => sales.CreatedBy, new { @class = "col-sm-3 control-label" })
                        <div class="col-sm-9">
                            @Html.TextBoxFor(s => sales.CreatedBy, new { @class = "form-control", @disabled = "disabled", Value = sales.Users.Name })
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(s => sales.Urgent, new { @class = "col-sm-3 control-label" })
                        <div class="col-sm-9">
                            <div class="radio-custom radio-primary radio-inline">
                                <input type="radio" id="non-urgent" name="sales.Urgent" value="Non-Urgent" @ViewData["NonUrgentRadio"].ToString() disabled />
                                <label for="non-urgent">Non-Urgent</label>
                            </div>
                            <div class="radio-custom radio-primary radio-inline">
                                <input type="radio" id="urgent" name="sales.Urgent" value="Urgent" @ViewData["UrgentRadio"].ToString() disabled />
                                <label for="urgent">Urgent</label>
                            </div>
                            @Html.ValidationMessageFor(s => sales.Urgent)
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(s => sales.RequireDelivery, new { @class = "col-sm-3 control-label" })
                        <div class="col-sm-9">
                            <div class="checkbox-custom checkbox-primary checkbox-inline">
                                <input type="checkbox" id="require-delivery" name="sales.RequireDelivery" value="Yes" @ViewData["RequireDeliveryCheckbox"].ToString() disabled />
                                <label for="require-delivery"></label>
                            </div>
                        </div>
                        <div class="col-sm-offset-3 col-sm-9">
                            <small class="help-block"><i class="icon wb-info-circle margin-0"></i> By unchecking this option will skip all delivery workflows.</small>
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(s => sales.BagNo, new { @class = "col-sm-3 control-label" })
                        <div class="col-sm-9">
                            @if (sales.Status == "Pending Packing")
                            {
                                @Html.TextBoxFor(s => sales.BagNo, new { @class = "form-control", @placeholder = "To be entered by Inventory" })
                            }
                            else
                            {
                                @Html.TextBoxFor(s => sales.BagNo, new { @class = "form-control", @placeholder = "To be entered by Inventory", @disabled = "disabled" })
                            }
                        </div>
                    </div>
                    if (sales.Status.Contains("Pending Delivery by"))
                    {
                        <div class="form-group">
                            @Html.Label("Delivery Confirmation:", new { @class = "col-sm-3 control-label" })
                            <div class="col-sm-9">
                                <div class="input-group input-group-file">
                                    <input type="text" class="form-control" readonly>
                                    <span class="input-group-btn">
                                        <span class="btn btn-primary btn-file">
                                            <i class="icon wb-upload" aria-hidden="true"></i>
                                            <input id="delivery-confirmation-uploader" type="file" multiple>
                                            @Html.HiddenFor(s => sales.DeliveryConfirmation)
                                        </span>
                                    </span>
                                </div>
                                @Html.ValidationMessageFor(s => sales.DeliveryConfirmation)
                                <div id="delivery-confirmation-files">
                                    @if (ViewData["DeliveryConfirmation"] != null)
                                    {
                                        List<string> files = (List<string>)ViewData["DeliveryConfirmation"];

                                        foreach (string file in files)
                                        {
                                            <div class="margin-top-10 small">
                                                <a href="@Url.Content("~/FileUploads/Temp/" + file)" target="_blank">@file</a>
                                                <button type="button" class="btn btn-pure btn-xs btn-danger icon wb-close" onclick="RemoveDeliveryConfirmationFile(this)"></button>
                                            </div>
                                        }
                                    }
                                </div>
                            </div>
                        </div>
                    }
                    else
                    {
                        <div class="form-group">
                            @Html.Label("Delivery Confirmation:", new { @class = "col-sm-3 control-label" })
                            <div class="col-sm-9">
                                @if (ViewData["DeliveryConfirmation"] != null)
                                {
                                    List<string> deliveryConfirmtions = (List<string>)ViewData["DeliveryConfirmation"];

                                    foreach (string file in deliveryConfirmtions)
                                    {
                                        <div class="margin-top-10 small">
                                            <a href="@Url.Content(ViewData["DeliveryConfirmationDomain"] + file)" target="_blank">@file</a>
                                        </div>
                                    }
                                }
                            </div>
                        </div>
                    }

                    <div class="form-group">
                        @Html.LabelFor(s => sales.Sale_ContactPerson, new { @class = "col-sm-3 control-label" })
                        <div class="col-sm-9">
                            @Html.TextBoxFor(s => sales.Sale_ContactPerson, new { @class = "form-control", @maxlength = "255" })
                            @Html.ValidationMessageFor(s => sales.Sale_ContactPerson)
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(s => sales.Remarks, new { @class = "col-sm-3 control-label" })
                        <div class="col-sm-9">
                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Packing")
                            {
                                @Html.TextAreaFor(s => sales.Remarks, new { @class = "form-control", @rows = "4" })
                            }
                            else
                            {
                                @Html.TextAreaFor(s => sales.Remarks, new { @class = "form-control", @rows = "4", @disabled = "disabled" })
                            }
                            @Html.ValidationMessageFor(s => sales.Remarks)
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(s => sales.CustomerRemarks, new { @class = "col-sm-3 control-label" })
                        <div class="col-sm-9">
                            @Html.TextAreaFor(s => sales.CustomerRemarks, new { @class = "form-control", @rows = "4", @disabled = "disabled" })
                            @Html.ValidationMessageFor(s => sales.CustomerRemarks)
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(s => sales.Sale_DeliveryRemarks, new { @class = "col-sm-3 control-label" })
                        <div class="col-sm-9">
                            @Html.TextAreaFor(s => sales.Sale_DeliveryRemarks, new { @class = "form-control", @rows = "4" })
                            @Html.ValidationMessageFor(s => sales.Sale_DeliveryRemarks)
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Status:", new { @class = "col-sm-3 control-label" })
                        <div class="col-sm-9">
                            @Html.TextBox("Status", sales.Status, new { @class = "form-control", @disabled = "disabled" })
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-12">
                            <h4>Transaction Details</h4>
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(s => sales.TransactionType, new { @class = "col-sm-3 control-label" })
                        <div class="col-sm-9">
                            <div class="radio-custom radio-primary radio-inline">
                                <input type="radio" id="Buy" name="sales.TransactionType" class="radio-transaction-type" value="Buy" onclick="TransactionTypeClick('Buy')" @ViewData["TransactionTypeBuyRadio"].ToString() disabled />
                                <label for="Buy">Buy</label>
                            </div>
                            <div class="radio-custom radio-primary radio-inline">
                                <input type="radio" id="Sell" name="sales.TransactionType" class="radio-transaction-type" value="Sell" onclick="TransactionTypeClick('Sell')" @ViewData["TransactionTypeSellRadio"].ToString() disabled />
                                <label for="Sell">Sell</label>
                            </div>
                            <div class="radio-custom radio-primary radio-inline">
                                <input type="radio" id="Encashment" name="sales.TransactionType" class="radio-transaction-type" value="Encashment" onclick="TransactionTypeClick('Encashment')" @ViewData["TransactionTypeEncashmentRadio"].ToString() disabled />
                                <label for="Encashment">Encashment</label>
                            </div>
                            <div class="radio-custom radio-primary radio-inline">
                                <input type="radio" id="Swap" name="sales.TransactionType" class="radio-transaction-type" value="Swap" onclick="TransactionTypeClick('Swap')" @ViewData["TransactionTypeSwapRadio"].ToString() disabled />
                                <label for="Swap">Swap</label>
                            </div>
                            <div class="radio-custom radio-primary radio-inline">
                                <input type="radio" id="CrossCurrency" name="sales.TransactionType" class="radio-transaction-type" value="Cross Currency" onclick="TransactionTypeClick('CrossCurrency')" @ViewData["TransactionTypeCrossCurrencyRadio"].ToString() disabled />
                                <label for="CrossCurrency">Cross Currency</label>
                            </div>
                        </div>
                        <div class="col-sm-9 col-sm-offset-3">@Html.ValidationMessageFor(s => sales.TransactionType)</div>
                    </div>

                    <div class="form-group">
                        <div class="col-sm-9">@Html.ValidationMessage("Transaction")</div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-12 table-responsive">
                            <table id="table-transaction" class="table table-hover table-condensed table-bordered" data-striped="true" data-height="250" data-mobile-responsive="true">
                                @if (ViewData["SaleTransactionsData"] != null)
                                {
                                    List<SaleTransactionsData> transactionData = (List<SaleTransactionsData>)ViewData["SaleTransactionsData"];

                                    if (transactionData.Count > 0)
                                    {
                                        if (ViewData["SaleTransactionType"].ToString() == "Buy")
                                        {
                                            <thead>
                                                <tr>
                                                    <th style="min-width: 50px;">ID</th>
                                                    <th style="min-width: 50px;">Type</th>
                                                    <th style="min-width: 150px;">Currency</th>
                                                    <th style="min-width: 200px;">Amount (Foreign)</th>
                                                    <th style="min-width: 150px;">Rate</th>
                                                    <th style="min-width: 150px;">Unit</th>
                                                    <th style="min-width: 200px;">Amount (Local)</th>
                                                    <th style="min-width: 150px;">Payment Mode</th>
                                                    <th style="min-width: 200px;">Cheque No.</th>
                                                    <th style="min-width: 200px;">Bank Transfer No.</th>
                                                    <th style="min-width: 200px;">Vessel Name</th>
                                                    <th style="min-width: 100px;">Outgoing Denomination</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @foreach (SaleTransactionsData transaction in transactionData)
                                                {
                                                    <tr id="transaction-row-@transaction.RowId">
                                                        <td>
                                                            @transaction.TransactionID
                                                            @Html.Hidden("Transaction_ID_" + transaction.RowId, transaction.TransactionID)
                                                            @Html.Hidden("Transaction_TransactionId_" + transaction.RowId, transaction.ID)
                                                        </td>
                                                        <td>
                                                            @transaction.Type
                                                            @Html.Hidden("Transaction_Type_" + transaction.RowId, transaction.Type)
                                                        </td>
                                                        <td>
                                                            @Html.DropDownList("Transaction_Currency_" + transaction.RowId, transaction.CurrencyDDL, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Currency_" + transaction.RowId, transaction.CurrencyDDL.SelectedValue)
                                                            @Html.ValidationMessage("Transaction_Currency_" + transaction.RowId)
                                                        </td>
                                                        <td>
                                                            <div class="input-group">
                                                                <span class="input-group-addon" id="span-amount-foreign-symbol-@transaction.RowId">@transaction.Symbol</span>
                                                                @Html.TextBox("Transaction_AmountForeign_" + transaction.RowId, transaction.AmountForeign, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_AmountForeign_" + transaction.RowId, transaction.AmountForeign)
                                                            </div>
                                                            @Html.ValidationMessage("Transaction_AmountForeign_" + transaction.RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_Rate_" + transaction.RowId, transaction.Rate, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Rate_" + transaction.RowId, transaction.Rate)
                                                            @Html.ValidationMessage("Transaction_Rate_" + transaction.RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_Unit_" + transaction.RowId, transaction.Unit, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Unit_" + transaction.RowId, transaction.Unit)
                                                        </td>
                                                        <td>
                                                            <div class="input-group">
                                                                <span class="input-group-addon">$</span>
                                                                @Html.TextBox("Transaction_Amount_Local_" + transaction.RowId, transaction.AmountLocal, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_AmountLocal_" + transaction.RowId, transaction.AmountLocal)
                                                            </div>
                                                            @Html.ValidationMessage("Transaction_AmountLocal_" + transaction.RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                @Html.DropDownList("Transaction_PaymentMode_" + transaction.RowId, transaction.PaymentModeDDL, new { @class = "form-control", @onchange = "PaymentModeChange(" + transaction.RowId + ")" })
                                                            }
                                                            else
                                                            {
                                                                @Html.DropDownList("Transaction_PaymentMode_" + transaction.RowId, transaction.PaymentModeDDL, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_PaymentMode_" + transaction.RowId, transaction.PaymentModeDDL.SelectedValue)
                                                            }
                                                            @Html.ValidationMessage("Transaction_PaymentMode_" + transaction.RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                if (transaction.DisabledChequeNo == "")
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_ChequeNo_" + transaction.RowId, transaction.ChequeNo, new { @class = "form-control", @readonly = "readonly" })</div>
                                                                    <div><a id="update-cheque-btn-@transaction.RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" onclick="UpdateCheque(@transaction.RowId)" style="text-decoration: none;" data-toggle="tooltip" data-original-title="Add Cheque"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                                else
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_ChequeNo_" + transaction.RowId, transaction.ChequeNo, new { @class = "form-control", @disabled = "disabled" })</div>
                                                                    <div><a id="update-cheque-btn-@transaction.RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" style="text-decoration: none;pointer-events: none;" data-toggle="tooltip" data-original-title="Add Cheque"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                            }
                                                            else
                                                            {
                                                                <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_ChequeNo_" + transaction.RowId, transaction.ChequeNo, new { @class = "form-control", @readonly = "readonly" })</div>
                                                                <div><a id="update-cheque-btn-@transaction.RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" style="text-decoration: none;pointer-events: none;" data-toggle="tooltip" data-original-title="Add Cheque"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                            }
                                                            @Html.ValidationMessage("Transaction_ChequeNo_" + transaction.RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                if (transaction.DisabledBankTransferNo == "")
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_BankTransferNo_" + transaction.RowId, transaction.BankTransferNo, new { @class = "form-control", @readonly = "readonly" })</div>
                                                                    <div><a id="update-bank-transfer-btn-@transaction.RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" onclick="UpdateBankTransfer(@transaction.RowId)" style="text-decoration: none;" data-toggle="tooltip" data-original-title="Add Bank Transfer"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                                else
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_BankTransferNo_" + transaction.RowId, transaction.BankTransferNo, new { @class = "form-control", @disabled = "disabled" })</div>
                                                                    <div><a id="update-bank-transfer-btn-@transaction.RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" style="text-decoration: none;pointer-events: none;" data-toggle="tooltip" data-original-title="Add Bank Transfer"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                            }
                                                            else
                                                            {
                                                                <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_BankTransferNo_" + transaction.RowId, transaction.BankTransferNo, new { @class = "form-control", @readonly = "readonly" })</div>
                                                                <div><a id="update-bank-transfer-btn-@transaction.RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" style="text-decoration: none;pointer-events: none;" data-toggle="tooltip" data-original-title="Add Bank Transfer"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                            }
                                                            @Html.ValidationMessage("Transaction_BankTransferNo_" + transaction.RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_VesselName_" + transaction.RowId, transaction.VesselName, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_VesselName_" + transaction.RowId, transaction.VesselName)
                                                            @Html.ValidationMessage("Transaction_VesselName_" + transaction.RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Packing" || transaction.Denominations.Count > 0)
                                                            {
                                                                <button type="button" class="btn btn-xs btn-primary" onclick="OpenDenominationModal(@transaction.RowId)">Update</button>
                                                            }
                                                            @Html.ValidationMessage("Transaction_Denomination_" + transaction.RowId)
                                                            <div class="modal fade" id="modal-transaction-denomination-@transaction.RowId" aria-hidden="false" aria-labelledby="modal-label-@transaction.RowId"
                                                                 role="dialog" tabindex="-1">
                                                                <div class="modal-dialog modal-lg">
                                                                    <div class="modal-content form-horizontal">
                                                                        <div class="modal-header">
                                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                                <span aria-hidden="true">×</span>
                                                                            </button>
                                                                            <h4 class="modal-title" id="modal-label-@transaction.RowId">Denomination - @transaction.DenominationCurrencyCode</h4>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="row">
                                                                                <div class="form-group">
                                                                                    <div class="col-sm-10 col-sm-offset-1">
                                                                                        <table id="table-transaction-denomination-@transaction.RowId" class="table table-hover table-condensed table-bordered" data-striped="true" data-height="250" data-mobile-responsive="true">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <th>Denomination</th>
                                                                                                    <th>Pieces</th>
                                                                                                    <th id="AmtCurr-@transaction.RowId">Amt (@transaction.DenominationCurrencyCode)</th>
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody>
                                                                                                @if (transaction.Denominations.Count > 0)
                                                                                                {
                                                                                                    foreach (DenominationsData denomination in transaction.Denominations)
                                                                                                    {
                                                                                                        if (denomination.DenominationValue == "coins")
                                                                                                        {
                                                                                                            <tr>
                                                                                                                <td>coins @Html.ValidationMessage("Denomination_Value_" + transaction.RowId + "_" + denomination.DenoId) @Html.Hidden("Denomination_Value_" + transaction.RowId + "_" + denomination.DenoId, denomination.DenominationValue)</td>
                                                                                                                <td>-</td>
                                                                                                                <td>
                                                                                                                    @if (sales.Status == "Pending Packing")
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_AmountForeign_" + transaction.RowId + "_" + denomination.DenoId, denomination.AmountForeign, new { @class = "form-control denomination-amount-foreign", @onchange = "CoinsChange(" + transaction.RowId + ", " + denomination.DenoId + ")" })
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_AmountForeign_" + transaction.RowId + "_" + denomination.DenoId, denomination.AmountForeign, new { @class = "form-control denomination-amount-foreign", @onchange = "CoinsChange(" + transaction.RowId + ", " + denomination.DenoId + ")", @readonly = "true" })
                                                                                                                    }
                                                                                                                    @Html.ValidationMessage("Denomination_Value_AmountForeign_" + transaction.RowId + "_" + denomination.DenoId)
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            <tr>
                                                                                                                <td>@denomination.DenominationValue @Html.ValidationMessage("Denomination_Value_" + transaction.RowId + "_" + denomination.DenoId) @Html.Hidden("Denomination_Value_" + transaction.RowId + "_" + denomination.DenoId, denomination.DenominationValue)</td>
                                                                                                                <td>
                                                                                                                    @if (sales.Status == "Pending Packing")
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_Pieces_" + transaction.RowId + "_" + denomination.DenoId, denomination.Pieces, new { @class = "form-control", @onchange = "PiecesChange(" + transaction.RowId + ", " + denomination.DenoId + ")" })
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_Pieces_" + transaction.RowId + "_" + denomination.DenoId, denomination.Pieces, new { @class = "form-control", @onchange = "PiecesChange(" + transaction.RowId + ", " + denomination.DenoId + ")", @readonly = "true" })
                                                                                                                    }
                                                                                                                    @Html.ValidationMessage("Denomination_Value_Pieces_" + transaction.RowId + "_" + denomination.DenoId)
                                                                                                                </td>
                                                                                                                <td><div id="denomination-amount-foreign-@transaction.RowId-@denomination.DenoId">@denomination.AmountForeign</div>@Html.ValidationMessage("Denomination_Value_AmountForeign_" + transaction.RowId + "_" + denomination.DenoId) @Html.Hidden("Denomination_Value_AmountForeign_" + transaction.RowId + "_" + denomination.DenoId, denomination.AmountForeign, new { @class = "denomination-amount-foreign" })</td>
                                                                                                            </tr>
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            </tbody>
                                                                                            <tfoot>
                                                                                                <tr>
                                                                                                    <td colspan="2" class="text-right">Total Calculated</td>
                                                                                                    <td><div id="denomination-total-calculated-foreign-symbol-@transaction.RowId" style="float:left;">@transaction.Symbol</div><div id="denomination-total-calculated-foreign-@transaction.RowId">@transaction.DenominationTotalCalculatedForeign</div>@Html.ValidationMessage("Denomination_Total_Calculated_Foreign_" + transaction.RowId) @Html.Hidden("Denomination_Total_Calculated_Foreign_" + transaction.RowId, transaction.DenominationTotalCalculatedForeign)</td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td colspan="2" class="text-right">Remaining</td>
                                                                                                    <td><div id="denomination-remaining-foreign-symbol-@transaction.RowId" style="float:left;">@transaction.Symbol</div><div id="denomination-remaining-foreign-@transaction.RowId">@transaction.DenominationRemainingForeign</div>@Html.Hidden("Denomination_Remaining_Foreign_" + transaction.RowId, transaction.DenominationRemainingForeign)</td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td colspan="2" class="text-right">Total Order</td>
                                                                                                    <td><div id="denomination-total-order-foreign-symbol-@transaction.RowId" style="float:left;">@transaction.Symbol</div><div id="denomination-total-order-foreign-@transaction.RowId">@transaction.DenominationTotalOrderForeign</div>@Html.Hidden("Denomination_Total_Order_Foreign_" + transaction.RowId, transaction.DenominationTotalOrderForeign)</td>
                                                                                                </tr>
                                                                                            </tfoot>
                                                                                        </table>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-sm-10 col-sm-offset-1">
                                                                                    @if (sales.Status == "Pending Packing")
                                                                                    {
                                                                                        <button class="btn btn-primary btn-outline" data-dismiss="modal" type="button">Update</button>
                                                                                        <button class="btn btn-danger btn-outline" type="button" onclick="RemoveDenomination(@transaction.RowId)">Remove Denomination</button>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <button class="btn btn-default btn-outline" data-dismiss="modal" type="button">Close</button>
                                                                                    }
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                }
                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                    <th colspan="3" style="text-align: right;">Total (Foreign)</th>
                                                    <th>
                                                        <div id="total-amount-foreign">$@ViewData["TotalForeign"].ToString()</div>
                                                    </th>
                                                    <th colspan="2" style="text-align: right;">Total (Local)</th>
                                                    <th>
                                                        <div id="total-amount-local">$@ViewData["TotalLocal"].ToString()</div>
                                                    </th>
                                                    <th colspan="5"></th>
                                                </tr>
                                            </tfoot>
                                        }
                                        else if (ViewData["SaleTransactionType"].ToString() == "Sell")
                                        {
                                            <thead>
                                                <tr>
                                                    <th style="min-width: 50px;">ID</th>
                                                    <th style="min-width: 50px;">Type</th>
                                                    <th style="min-width: 150px;">Currency</th>
                                                    <th style="min-width: 200px;">Amount (Foreign)</th>
                                                    <th style="min-width: 150px;">Rate</th>
                                                    <th style="min-width: 150px;">Unit</th>
                                                    <th style="min-width: 200px;">Amount (Local)</th>
                                                    <th style="min-width: 150px;">Payment Mode</th>
                                                    <th style="min-width: 200px;">Cheque No.</th>
                                                    <th style="min-width: 200px;">Bank Transfer No.</th>
                                                    <th style="min-width: 200px;">Vessel Name</th>
                                                    <th style="min-width: 100px;">Outgoing Denomination</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @foreach (SaleTransactionsData transaction in transactionData)
                                                {
                                                    <tr id="transaction-row-@transaction.RowId">
                                                        <td>
                                                            @transaction.TransactionID
                                                            @Html.Hidden("Transaction_ID_" + transaction.RowId, transaction.TransactionID)
                                                            @Html.Hidden("Transaction_TransactionId_" + transaction.RowId, transaction.ID)
                                                        </td>
                                                        <td>
                                                            @transaction.Type
                                                            @Html.Hidden("Transaction_Type_" + transaction.RowId, transaction.Type)
                                                        </td>
                                                        <td>
                                                            @Html.DropDownList("Transaction_Currency_" + transaction.RowId, transaction.CurrencyDDL, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Currency_" + transaction.RowId, transaction.CurrencyDDL.SelectedValue)
                                                        </td>
                                                        <td>
                                                            <div class="input-group">
                                                                <span class="input-group-addon" id="span-amount-foreign-symbol-@transaction.RowId">@transaction.Symbol</span>
                                                                @Html.TextBox("Transaction_AmountForeign_" + transaction.RowId, transaction.AmountForeign, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_AmountForeign_" + transaction.RowId, transaction.AmountForeign)
                                                            </div>
                                                            @Html.ValidationMessage("Transaction_AmountForeign_" + transaction.RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_Rate_" + transaction.RowId, transaction.Rate, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Rate_" + transaction.RowId, transaction.Rate)
                                                            @Html.ValidationMessage("Transaction_Rate_" + transaction.RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_Unit_" + transaction.RowId, transaction.Unit, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Unit_" + transaction.RowId, transaction.Unit)
                                                        </td>
                                                        <td>
                                                            <div class="input-group">
                                                                <span class="input-group-addon">$</span>
                                                                @Html.TextBox("Transaction_Amount_Local_" + transaction.RowId, transaction.AmountLocal, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_AmountLocal_" + transaction.RowId, transaction.AmountLocal)
                                                            </div>
                                                            @Html.ValidationMessage("Transaction_AmountLocal_" + transaction.RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                @Html.DropDownList("Transaction_PaymentMode_" + transaction.RowId, transaction.PaymentModeDDL, new { @class = "form-control", @onchange = "PaymentModeChange(" + transaction.RowId + ")" })
                                                            }
                                                            else
                                                            {
                                                                @Html.DropDownList("Transaction_PaymentMode_" + transaction.RowId, transaction.PaymentModeDDL, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_PaymentMode_" + transaction.RowId, transaction.PaymentModeDDL.SelectedValue)
                                                            }
                                                            @Html.ValidationMessage("Transaction_PaymentMode_" + transaction.RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                if (transaction.DisabledChequeNo == "")
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_ChequeNo_" + transaction.RowId, transaction.ChequeNo, new { @class = "form-control", @readonly = "readonly" })</div>
                                                                    <div><a id="update-cheque-btn-@transaction.RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" onclick="UpdateCheque(@transaction.RowId)" style="text-decoration: none;" data-toggle="tooltip" data-original-title="Add Cheque"><i class="icon wb-edit" aria-hidden="true"></i></a></div>

                                                                }
                                                                else
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_ChequeNo_" + transaction.RowId, transaction.ChequeNo, new { @class = "form-control", @disabled = "disabled" })</div>
                                                                    <div><a id="update-cheque-btn-@transaction.RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" style="text-decoration: none;pointer-events: none;" data-toggle="tooltip" data-original-title="Add Cheque"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                            }
                                                            else
                                                            {
                                                                @Html.TextBox("Transaction_ChequeNo_" + transaction.RowId, transaction.ChequeNo, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_ChequeNo_" + transaction.RowId, transaction.ChequeNo)
                                                            }
                                                            @Html.ValidationMessage("Transaction_ChequeNo_" + transaction.RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                if (transaction.DisabledBankTransferNo == "")
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_BankTransferNo_" + transaction.RowId, transaction.BankTransferNo, new { @class = "form-control", @readonly = "readonly" })</div>
                                                                    <div><a id="update-bank-transfer-btn-@transaction.RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" onclick="UpdateBankTransfer(@transaction.RowId)" style="text-decoration: none;" data-toggle="tooltip" data-original-title="Add Bank Transfer"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                                else
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_BankTransferNo_" + transaction.RowId, transaction.BankTransferNo, new { @class = "form-control", @disabled = "disabled" })</div>
                                                                    <div><a id="update-bank-transfer-btn-@transaction.RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" style="text-decoration: none;pointer-events: none;" data-toggle="tooltip" data-original-title="Add Bank Transfer"><i class="icon wb-edit" aria-hidden="true"></i></a></div>

                                                                }
                                                            }
                                                            else
                                                            {
                                                                @Html.TextBox("Transaction_BankTransferNo_" + transaction.RowId, transaction.BankTransferNo, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_BankTransferNo_" + transaction.RowId, transaction.BankTransferNo)
                                                            }
                                                            @Html.ValidationMessage("Transaction_BankTransferNo_" + transaction.RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_VesselName_" + transaction.RowId, transaction.VesselName, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_VesselName_" + transaction.RowId, transaction.VesselName)
                                                            @Html.ValidationMessage("Transaction_VesselName_" + transaction.RowId)
                                                        </td>
                                                        <td>
                                                            <button type="button" class="btn btn-xs btn-primary" onclick="OpenDenominationModal(@transaction.RowId)">Update</button>
                                                            @Html.ValidationMessage("Transaction_Denomination_" + transaction.RowId)
                                                            <div class="modal fade" id="modal-transaction-denomination-@transaction.RowId" aria-hidden="false" aria-labelledby="modal-label-@transaction.RowId"
                                                                 role="dialog" tabindex="-1">
                                                                <div class="modal-dialog modal-lg">
                                                                    <div class="modal-content form-horizontal">
                                                                        <div class="modal-header">
                                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                                <span aria-hidden="true">×</span>
                                                                            </button>
                                                                            <h4 class="modal-title" id="modal-label-@transaction.RowId">Denomination - @transaction.DenominationCurrencyCode</h4>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="row">
                                                                                <div class="form-group">
                                                                                    <div class="col-sm-10 col-sm-offset-1">
                                                                                        <table id="table-transaction-denomination-@transaction.RowId" class="table table-hover table-condensed table-bordered" data-striped="true" data-height="250" data-mobile-responsive="true">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <th>Denomination</th>
                                                                                                    <th>Pieces</th>
                                                                                                    <th id="AmtCurr-@transaction.RowId">Amt (@transaction.DenominationCurrencyCode)</th>
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody>
                                                                                                @if (transaction.Denominations.Count > 0)
                                                                                                {
                                                                                                    foreach (DenominationsData denomination in transaction.Denominations)
                                                                                                    {
                                                                                                        if (denomination.DenominationValue == "coins")
                                                                                                        {
                                                                                                            <tr>
                                                                                                                <td>coins @Html.ValidationMessage("Denomination_Value_" + transaction.RowId + "_" + denomination.DenoId) @Html.Hidden("Denomination_Value_" + transaction.RowId + "_" + denomination.DenoId, denomination.DenominationValue)</td>
                                                                                                                <td>-</td>
                                                                                                                <td>
                                                                                                                    @if (sales.Status == "Pending Packing")
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_AmountForeign_" + transaction.RowId + "_" + denomination.DenoId, denomination.AmountForeign, new { @class = "form-control denomination-amount-foreign", @onchange = "CoinsChange(" + transaction.RowId + ", " + denomination.DenoId + ")" })
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_AmountForeign_" + transaction.RowId + "_" + denomination.DenoId, denomination.AmountForeign, new { @class = "form-control denomination-amount-foreign", @onchange = "CoinsChange(" + transaction.RowId + ", " + denomination.DenoId + ")", @readonly = "true" })
                                                                                                                    }
                                                                                                                    @Html.ValidationMessage("Denomination_Value_AmountForeign_" + transaction.RowId + "_" + denomination.DenoId)
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            <tr>
                                                                                                                <td>@denomination.DenominationValue @Html.ValidationMessage("Denomination_Value_" + transaction.RowId + "_" + denomination.DenoId) @Html.Hidden("Denomination_Value_" + transaction.RowId + "_" + denomination.DenoId, denomination.DenominationValue)</td>
                                                                                                                <td>
                                                                                                                    @if (sales.Status == "Pending Packing")
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_Pieces_" + transaction.RowId + "_" + denomination.DenoId, denomination.Pieces, new { @class = "form-control", @onchange = "PiecesChange(" + transaction.RowId + ", " + denomination.DenoId + ")" })
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_Pieces_" + transaction.RowId + "_" + denomination.DenoId, denomination.Pieces, new { @class = "form-control", @onchange = "PiecesChange(" + transaction.RowId + ", " + denomination.DenoId + ")", @readonly = "true" })
                                                                                                                    }
                                                                                                                    @Html.ValidationMessage("Denomination_Value_Pieces_" + transaction.RowId + "_" + denomination.DenoId)
                                                                                                                </td>
                                                                                                                <td><div id="denomination-amount-foreign-@transaction.RowId-@denomination.DenoId">@denomination.AmountForeign</div>@Html.ValidationMessage("Denomination_Value_AmountForeign_" + transaction.RowId + "_" + denomination.DenoId) @Html.Hidden("Denomination_Value_AmountForeign_" + transaction.RowId + "_" + denomination.DenoId, denomination.AmountForeign, new { @class = "denomination-amount-foreign" })</td>
                                                                                                            </tr>
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            </tbody>
                                                                                            <tfoot>
                                                                                                <tr>
                                                                                                    <td colspan="2" class="text-right">Total Calculated</td>
                                                                                                    <td><div id="denomination-total-calculated-foreign-symbol-@transaction.RowId" style="float:left;">@transaction.Symbol</div><div id="denomination-total-calculated-foreign-@transaction.RowId">@transaction.DenominationTotalCalculatedForeign</div>@Html.ValidationMessage("Denomination_Total_Calculated_Foreign_" + transaction.RowId) @Html.Hidden("Denomination_Total_Calculated_Foreign_" + transaction.RowId, transaction.DenominationTotalCalculatedForeign)</td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td colspan="2" class="text-right">Remaining</td>
                                                                                                    <td><div id="denomination-remaining-foreign-symbol-@transaction.RowId" style="float:left;">@transaction.Symbol</div><div id="denomination-remaining-foreign-@transaction.RowId">@transaction.DenominationRemainingForeign</div>@Html.Hidden("Denomination_Remaining_Foreign_" + transaction.RowId, transaction.DenominationRemainingForeign)</td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td colspan="2" class="text-right">Total Order</td>
                                                                                                    <td><div id="denomination-total-order-foreign-symbol-@transaction.RowId" style="float:left;">@transaction.Symbol</div><div id="denomination-total-order-foreign-@transaction.RowId">@transaction.DenominationTotalOrderForeign</div>@Html.Hidden("Denomination_Total_Order_Foreign_" + transaction.RowId, transaction.DenominationTotalOrderForeign)</td>
                                                                                                </tr>
                                                                                            </tfoot>
                                                                                        </table>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-sm-10 col-sm-offset-1">
                                                                                    @if (sales.Status == "Pending Packing")
                                                                                    {
                                                                                        <button class="btn btn-primary btn-outline" data-dismiss="modal" type="button">Update</button>
                                                                                        <button class="btn btn-danger btn-outline" type="button" onclick="RemoveDenomination(@transaction.RowId)">Remove Denomination</button>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <button class="btn btn-default btn-outline" data-dismiss="modal" type="button">Close</button>
                                                                                    }
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                }
                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                    <th colspan="3" style="text-align: right;">Total (Foreign)</th>
                                                    <th>
                                                        <div id="total-amount-foreign">$@ViewData["TotalForeign"].ToString()</div>
                                                    </th>
                                                    <th colspan="2" style="text-align: right;">Total (Local)</th>
                                                    <th>
                                                        <div id="total-amount-local">$@ViewData["TotalLocal"].ToString()</div>
                                                    </th>
                                                    <th colspan="5"></th>
                                                </tr>
                                            </tfoot>
                                        }
                                        else if (ViewData["SaleTransactionType"].ToString() == "Encashment")
                                        {
                                            <thead>
                                                <tr>
                                                    <th style="min-width: 50px;">ID</th>
                                                    <th style="min-width: 50px;">Type</th>
                                                    <th style="min-width: 150px;">Currency</th>
                                                    <th style="min-width: 200px;">Amount (Foreign)</th>
                                                    <th style="min-width: 150px;">Rate</th>
                                                    <th style="min-width: 150px;">Encashment Rate</th>
                                                    <th style="min-width: 150px;">Unit</th>
                                                    <th style="min-width: 200px;">Amount (Local)</th>
                                                    <th style="min-width: 150px;">Payment Mode</th>
                                                    <th style="min-width: 200px;">Cheque No.</th>
                                                    <th style="min-width: 200px;">Bank Transfer No.</th>
                                                    <th style="min-width: 200px;">Vessel Name</th>
                                                    <th style="min-width: 100px;">Outgoing Denomination</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @for (int i = 0; i < transactionData.Count; i += 2)
                                                {
                                                    <tr id="transaction-row-@transactionData[i].RowId" class="paired-row-@transactionData[i].RowId">
                                                        <td>
                                                            @transactionData[i].TransactionID
                                                            @Html.Hidden("Transaction_ID_" + transactionData[i].RowId, transactionData[i].TransactionID)
                                                            @Html.Hidden("Transaction_TransactionId_" + transactionData[i].RowId, transactionData[i].ID)
                                                        </td>
                                                        <td>
                                                            @transactionData[i].Type
                                                            @Html.Hidden("Transaction_Type_" + transactionData[i].RowId, transactionData[i].Type)
                                                        </td>
                                                        <td>
                                                            @Html.DropDownList("Transaction_Currency_" + transactionData[i].RowId, transactionData[i].CurrencyDDL, new { @class = "form-control currency-dropdown", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Currency_" + transactionData[i].RowId, transactionData[i].CurrencyDDL.SelectedValue)
                                                            @Html.ValidationMessage("Transaction_Currency_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            <div class="input-group">
                                                                <span class="input-group-addon" id="span-amount-foreign-symbol-@transactionData[i].RowId">@transactionData[i].Symbol</span>
                                                                @Html.TextBox("Transaction_AmountForeign_" + transactionData[i].RowId, transactionData[i].AmountForeign, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_AmountForeign_" + transactionData[i].RowId, transactionData[i].AmountForeign)
                                                            </div>
                                                            @Html.ValidationMessage("Transaction_AmountForeign_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_Rate_" + transactionData[i].RowId, transactionData[i].Rate, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Rate_" + transactionData[i].RowId, transactionData[i].Rate)
                                                            @Html.ValidationMessage("Transaction_Rate_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_EncashmentRate_" + transactionData[i].RowId, transactionData[i].EncashmentRate, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_EncashmentRate_" + transactionData[i].RowId, transactionData[i].EncashmentRate)
                                                            @Html.ValidationMessage("Transaction_EncashmentRate_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_Unit_" + transactionData[i].RowId, transactionData[i].Unit, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Unit_" + transactionData[i].RowId, transactionData[i].Unit)
                                                        </td>
                                                        <td>
                                                            <div class="input-group">
                                                                <span class="input-group-addon">$</span>
                                                                @Html.TextBox("Transaction_Amount_Local_" + transactionData[i].RowId, transactionData[i].AmountLocal, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_AmountLocal_" + transactionData[i].RowId, transactionData[i].AmountLocal.Replace(",", ""))
                                                            </div>
                                                            @Html.ValidationMessage("Transaction_AmountLocal_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                @Html.DropDownList("Transaction_PaymentMode_" + transactionData[i].RowId, transactionData[i].PaymentModeDDL, new { @class = "form-control", @onchange = "PaymentModeChange(" + transactionData[i].RowId + ")" })
                                                            }
                                                            else
                                                            {
                                                                @Html.DropDownList("Transaction_PaymentMode_" + transactionData[i].RowId, transactionData[i].PaymentModeDDL, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_PaymentMode_" + transactionData[i].RowId, transactionData[i].PaymentModeDDL.SelectedValue)
                                                            }
                                                            @Html.ValidationMessage("Transaction_PaymentMode_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                if (transactionData[i].DisabledChequeNo == "")
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_ChequeNo_" + transactionData[i].RowId, transactionData[i].ChequeNo, new { @class = "form-control", @readonly = "readonly" })</div>
                                                                    <div><a id="update-cheque-btn-@transactionData[i].RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" onclick="UpdateCheque(@transactionData[i].RowId)" style="text-decoration: none;" data-toggle="tooltip" data-original-title="Add Cheque"><i class="icon wb-edit" aria-hidden="true"></i></a></div>

                                                                }
                                                                else
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_ChequeNo_" + transactionData[i].RowId, transactionData[i].ChequeNo, new { @class = "form-control", @disabled = "disabled" })</div>
                                                                    <div><a id="update-cheque-btn-@transactionData[i].RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" style="text-decoration: none;pointer-events: none;" data-toggle="tooltip" data-original-title="Add Cheque"><i class="icon wb-edit" aria-hidden="true"></i></a></div>

                                                                }
                                                            }
                                                            else
                                                            {
                                                                @Html.TextBox("Transaction_ChequeNo_" + transactionData[i].RowId, transactionData[i].ChequeNo, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_ChequeNo_" + transactionData[i].RowId, transactionData[i].ChequeNo)
                                                            }
                                                            @Html.ValidationMessage("Transaction_ChequeNo_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                if (transactionData[i].DisabledBankTransferNo == "")
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_BankTransferNo_" + transactionData[i].RowId, transactionData[i].BankTransferNo, new { @class = "form-control", @readonly = "readonly" })</div>
                                                                    <div><a id="update-bank-transfer-btn-@transactionData[i].RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" onclick="UpdateBankTransfer(@transactionData[i].RowId)" style="text-decoration: none;" data-toggle="tooltip" data-original-title="Add Bank Transfer"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                                else
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_BankTransferNo_" + transactionData[i].RowId, transactionData[i].BankTransferNo, new { @class = "form-control", @disabled = "disabled" })</div>
                                                                    <div><a id="update-bank-transfer-btn-@transactionData[i].RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" style="text-decoration: none;pointer-events: none;" data-toggle="tooltip" data-original-title="Add Bank Transfer"><i class="icon wb-edit" aria-hidden="true"></i></a></div>

                                                                }
                                                            }
                                                            else
                                                            {
                                                                @Html.TextBox("Transaction_BankTransferNo_" + transactionData[i].RowId, transactionData[i].BankTransferNo, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_BankTransferNo_" + transactionData[i].RowId, transactionData[i].BankTransferNo)
                                                            }
                                                            @Html.ValidationMessage("Transaction_BankTransferNo_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_VesselName_" + transactionData[i].RowId, transactionData[i].VesselName, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_VesselName_" + transactionData[i].RowId, transactionData[i].VesselName)
                                                            @Html.ValidationMessage("Transaction_VesselName_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            <button type="button" class="btn btn-xs btn-primary" onclick="OpenDenominationModal(@transactionData[i].RowId)">Update</button>
                                                            @Html.ValidationMessage("Transaction_Denomination_" + transactionData[i].RowId)
                                                            <div class="modal fade" id="modal-transaction-denomination-@transactionData[i].RowId" aria-hidden="false" aria-labelledby="modal-label-@transactionData[i].RowId"
                                                                 role="dialog" tabindex="-1">
                                                                <div class="modal-dialog modal-lg">
                                                                    <div class="modal-content form-horizontal">
                                                                        <div class="modal-header">
                                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                                <span aria-hidden="true">×</span>
                                                                            </button>
                                                                            <h4 class="modal-title" id="modal-label-@transactionData[i].RowId">Denomination - @transactionData[i].DenominationCurrencyCode</h4>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="row">
                                                                                <div class="form-group">
                                                                                    <div class="col-sm-10 col-sm-offset-1">
                                                                                        <table id="table-transaction-denomination-@transactionData[i].RowId" class="table table-hover table-condensed table-bordered" data-striped="true" data-height="250" data-mobile-responsive="true">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <th>Denomination</th>
                                                                                                    <th>Pieces</th>
                                                                                                    <th id="AmtCurr-@transactionData[i].RowId">Amt (@transactionData[i].DenominationCurrencyCode)</th>
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody>
                                                                                                @if (transactionData[i].Denominations.Count > 0)
                                                                                                {
                                                                                                    foreach (DenominationsData denomination in transactionData[i].Denominations)
                                                                                                    {
                                                                                                        if (denomination.DenominationValue == "coins")
                                                                                                        {
                                                                                                            <tr>
                                                                                                                <td>coins @Html.ValidationMessage("Denomination_Value_" + transactionData[i].RowId + "_" + denomination.DenoId) @Html.Hidden("Denomination_Value_" + transactionData[i].RowId + "_" + denomination.DenoId, denomination.DenominationValue)</td>
                                                                                                                <td>-</td>
                                                                                                                <td>
                                                                                                                    @if (sales.Status == "Pending Packing")
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_AmountForeign_" + transactionData[i].RowId + "_" + denomination.DenoId, denomination.AmountForeign, new { @class = "form-control denomination-amount-foreign", @onchange = "CoinsChange(" + transactionData[i].RowId + ", " + denomination.DenoId + ")" })
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_AmountForeign_" + transactionData[i].RowId + "_" + denomination.DenoId, denomination.AmountForeign, new { @class = "form-control denomination-amount-foreign", @onchange = "CoinsChange(" + transactionData[i].RowId + ", " + denomination.DenoId + ")", @readonly = "true" })
                                                                                                                    }

                                                                                                                    @Html.ValidationMessage("Denomination_Value_AmountForeign_" + transactionData[i].RowId + "_" + denomination.DenoId)
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            <tr>
                                                                                                                <td>@denomination.DenominationValue @Html.ValidationMessage("Denomination_Value_" + transactionData[i].RowId + "_" + denomination.DenoId) @Html.Hidden("Denomination_Value_" + transactionData[i].RowId + "_" + denomination.DenoId, denomination.DenominationValue)</td>
                                                                                                                <td>
                                                                                                                    @if (sales.Status == "Pending Packing")
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_Pieces_" + transactionData[i].RowId + "_" + denomination.DenoId, denomination.Pieces, new { @class = "form-control", @onchange = "PiecesChange(" + transactionData[i].RowId + ", " + denomination.DenoId + ")" })
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_Pieces_" + transactionData[i].RowId + "_" + denomination.DenoId, denomination.Pieces, new { @class = "form-control", @onchange = "PiecesChange(" + transactionData[i].RowId + ", " + denomination.DenoId + ")", @readonly = "true" })
                                                                                                                    }
                                                                                                                    @Html.ValidationMessage("Denomination_Value_Pieces_" + transactionData[i].RowId + "_" + denomination.DenoId)
                                                                                                                </td>
                                                                                                                <td><div id="denomination-amount-foreign-@transactionData[i].RowId-@denomination.DenoId">@denomination.AmountForeign</div>@Html.ValidationMessage("Denomination_Value_AmountForeign_" + transactionData[i].RowId + "_" + denomination.DenoId) @Html.Hidden("Denomination_Value_AmountForeign_" + transactionData[i].RowId + "_" + denomination.DenoId, denomination.AmountForeign.Replace(",", ""), new { @class = "denomination-amount-foreign" })</td>
                                                                                                            </tr>
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            </tbody>
                                                                                            <tfoot>
                                                                                                <tr>
                                                                                                    <td colspan="2" class="text-right">Total Calculated</td>
                                                                                                    <td><div id="denomination-total-calculated-foreign-symbol-@transactionData[i].RowId" style="float:left;">@transactionData[i].Symbol</div><div id="denomination-total-calculated-foreign-@transactionData[i].RowId">@transactionData[i].DenominationTotalCalculatedForeign</div>@Html.ValidationMessage("Denomination_Total_Calculated_Foreign_" + transactionData[i].RowId) @Html.Hidden("Denomination_Total_Calculated_Foreign_" + transactionData[i].RowId, transactionData[i].DenominationTotalCalculatedForeign)</td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td colspan="2" class="text-right">Remaining</td>
                                                                                                    <td><div id="denomination-remaining-foreign-symbol-@transactionData[i].RowId" style="float:left;">@transactionData[i].Symbol</div><div id="denomination-remaining-foreign-@transactionData[i].RowId">@transactionData[i].DenominationRemainingForeign</div>@Html.Hidden("Denomination_Remaining_Foreign_" + transactionData[i].RowId, transactionData[i].DenominationRemainingForeign)</td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td colspan="2" class="text-right">Total Order</td>
                                                                                                    <td><div id="denomination-total-order-foreign-symbol-@transactionData[i].RowId" style="float:left;">@transactionData[i].Symbol</div><div id="denomination-total-order-foreign-@transactionData[i].RowId">@transactionData[i].DenominationTotalOrderForeign</div>@Html.Hidden("Denomination_Total_Order_Foreign_" + transactionData[i].RowId, transactionData[i].DenominationTotalOrderForeign)</td>
                                                                                                </tr>
                                                                                            </tfoot>
                                                                                        </table>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-sm-10 col-sm-offset-1">
                                                                                    @if (sales.Status == "Pending Packing")
                                                                                    {
                                                                                        <button class="btn btn-primary btn-outline" data-dismiss="modal" type="button">Update</button>
                                                                                        <button class="btn btn-danger btn-outline" type="button" onclick="RemoveDenomination(@transactionData[i].RowId)">Remove Denomination</button>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <button class="btn btn-default btn-outline" data-dismiss="modal" type="button">Close</button>
                                                                                    }
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr id="transaction-row-@transactionData[i + 1].RowId" class="paired-row-@transactionData[i].RowId">
                                                        <td>
                                                            @transactionData[i + 1].TransactionID
                                                            @Html.Hidden("Transaction_ID_" + transactionData[i + 1].RowId, transactionData[i + 1].TransactionID)
                                                            @Html.Hidden("Transaction_TransactionId_" + transactionData[i + 1].RowId, transactionData[i + 1].ID)
                                                        </td>
                                                        <td>
                                                            @transactionData[i + 1].Type
                                                            @Html.Hidden("Transaction_Type_" + transactionData[i + 1].RowId, transactionData[i + 1].Type)
                                                        </td>
                                                        <td>
                                                            @Html.DropDownList("Transaction_Currency_" + transactionData[i + 1].RowId, transactionData[i + 1].CurrencyDDL, new { @class = "form-control currency-dropdown", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Currency_" + transactionData[i + 1].RowId, transactionData[i + 1].CurrencyDDL.SelectedValue)
                                                            @Html.ValidationMessage("Transaction_Currency_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            <div class="input-group">
                                                                <span class="input-group-addon" id="span-amount-foreign-symbol-@transactionData[i + 1].RowId">@transactionData[i + 1].Symbol</span>
                                                                @Html.TextBox("Transaction_Amount_Foreign_" + transactionData[i + 1].RowId, transactionData[i + 1].AmountForeign, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_AmountForeign_" + transactionData[i + 1].RowId, transactionData[i + 1].AmountForeign)
                                                            </div>
                                                            @Html.ValidationMessage("Transaction_AmountForeign_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_rate_" + transactionData[i + 1].RowId, transactionData[i + 1].Rate, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Rate_" + transactionData[i + 1].RowId, transactionData[i + 1].Rate)
                                                            @Html.ValidationMessage("Transaction_Rate_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_Encashment_Rate_" + transactionData[i + 1].RowId, transactionData[i + 1].EncashmentRate, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_EncashmentRate_" + transactionData[i + 1].RowId, transactionData[i + 1].EncashmentRate)
                                                            @Html.ValidationMessage("Transaction_EncashmentRate_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_Unit_" + transactionData[i + 1].RowId, transactionData[i + 1].Unit, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Unit_" + transactionData[i + 1].RowId, transactionData[i + 1].Unit)
                                                        </td>
                                                        <td>
                                                            <div class="input-group">
                                                                <span class="input-group-addon">$</span>
                                                                @Html.TextBox("Transaction_Amount_Local_" + transactionData[i + 1].RowId, transactionData[i + 1].AmountLocal, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_AmountLocal_" + transactionData[i + 1].RowId, transactionData[i + 1].AmountLocal)
                                                            </div>
                                                            @Html.ValidationMessage("Transaction_AmountLocal_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                @Html.DropDownList("Transaction_PaymentMode_" + transactionData[i + 1].RowId, transactionData[i + 1].PaymentModeDDL, new { @class = "form-control", @onchange = "PaymentModeChange(" + transactionData[i + 1].RowId + ")" })
                                                            }
                                                            else
                                                            {
                                                                @Html.DropDownList("Transaction_PaymentMode_" + transactionData[i + 1].RowId, transactionData[i + 1].PaymentModeDDL, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_PaymentMode_" + transactionData[i + 1].RowId, transactionData[i + 1].PaymentModeDDL.SelectedValue)
                                                            }
                                                            @Html.ValidationMessage("Transaction_PaymentMode_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                if (transactionData[i + 1].DisabledChequeNo == "")
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_ChequeNo_" + transactionData[i + 1].RowId, transactionData[i + 1].ChequeNo, new { @class = "form-control", @readonly = "readonly" })</div>
                                                                    <div><a id="update-cheque-btn-@transactionData[i + 1].RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" onclick="UpdateCheque(@transactionData[i + 1].RowId)" style="text-decoration: none;" data-toggle="tooltip" data-original-title="Add Cheque"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                                else
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_ChequeNo_" + transactionData[i + 1].RowId, transactionData[i + 1].ChequeNo, new { @class = "form-control", @disabled = "disabled" })</div>
                                                                    <div><a id="update-cheque-btn-@transactionData[i + 1].RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" style="text-decoration: none;pointer-events: none;" data-toggle="tooltip" data-original-title="Add Cheque"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                            }
                                                            else
                                                            {
                                                                @Html.TextBox("Transaction_ChequeNo_" + transactionData[i + 1].RowId, transactionData[i + 1].ChequeNo, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_ChequeNo_" + transactionData[i + 1].RowId, transactionData[i + 1].ChequeNo)
                                                            }
                                                            @Html.ValidationMessage("Transaction_ChequeNo_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                if (transactionData[i + 1].DisabledBankTransferNo == "")
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_BankTransferNo_" + transactionData[i + 1].RowId, transactionData[i + 1].BankTransferNo, new { @class = "form-control" })</div>
                                                                    <div><a id="update-bank-transfer-btn-@transactionData[i + 1].RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" onclick="UpdateBankTransfer(@transactionData[i + 1].RowId)" style="text-decoration: none;" data-toggle="tooltip" data-original-title="Add Bank Transfer"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                                else
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_BankTransferNo_" + transactionData[i + 1].RowId, transactionData[i + 1].BankTransferNo, new { @class = "form-control", @disabled = "disabled" })</div>
                                                                    <div><a id="update-bank-transfer-btn-@transactionData[i + 1].RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" style="text-decoration: none;pointer-events: none;" data-toggle="tooltip" data-original-title="Add Bank Transfer"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                            }
                                                            else
                                                            {
                                                                @Html.TextBox("Transaction_BankTransferNo_" + transactionData[i + 1].RowId, transactionData[i + 1].BankTransferNo, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_BankTransferNo_" + transactionData[i + 1].RowId, transactionData[i + 1].BankTransferNo)
                                                            }
                                                            @Html.ValidationMessage("Transaction_BankTransferNo_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_VesselName_" + transactionData[i + 1].RowId, transactionData[i + 1].VesselName, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.ValidationMessage("Transaction_VesselName_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td></td>
                                                    </tr>
                                                }
                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                    <th colspan="3" style="text-align: right;">Total (Foreign)</th>
                                                    <th>
                                                        <div id="total-amount-foreign">$@ViewData["TotalForeign"].ToString()</div>
                                                    </th>
                                                    <th colspan="3" style="text-align: right;">Total (Local)</th>
                                                    <th>
                                                        <div id="total-amount-local">$@ViewData["TotalLocal"].ToString()</div>
                                                    </th>
                                                    <th colspan="5"></th>
                                                </tr>
                                            </tfoot>
                                        }
                                        else if (ViewData["SaleTransactionType"].ToString() == "Swap")
                                        {
                                            <thead>
                                                <tr>
                                                    <th style="min-width: 50px;">ID</th>
                                                    <th style="min-width: 50px;">Type</th>
                                                    <th style="min-width: 150px;">Currency</th>
                                                    <th style="min-width: 200px;">Amount (Foreign)</th>
                                                    <th style="min-width: 150px;">Rate</th>
                                                    <th style="min-width: 150px;">Encashment Rate</th>
                                                    <th style="min-width: 150px;">Unit</th>
                                                    <th style="min-width: 200px;">Amount (Local)</th>
                                                    <th style="min-width: 150px;">Payment Mode</th>
                                                    <th style="min-width: 200px;">Cheque No.</th>
                                                    <th style="min-width: 200px;">Bank Transfer No.</th>
                                                    <th style="min-width: 200px;">Vessel Name</th>
                                                    <th style="min-width: 100px;">Outgoing Denomination</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @for (int i = 0; i < transactionData.Count; i += 2)
                                                {
                                                    <tr id="transaction-row-@transactionData[i].RowId" class="paired-row-@transactionData[i].RowId">
                                                        <td>
                                                            @transactionData[i].TransactionID
                                                            @Html.Hidden("Transaction_ID_" + transactionData[i].RowId, transactionData[i].TransactionID)
                                                            @Html.Hidden("Transaction_TransactionId_" + transactionData[i].RowId, transactionData[i].ID)
                                                        </td>
                                                        <td>
                                                            @transactionData[i].Type
                                                            @Html.Hidden("Transaction_Type_" + transactionData[i].RowId, transactionData[i].Type)
                                                        </td>
                                                        <td>
                                                            @Html.DropDownList("Transaction_Currency_" + transactionData[i].RowId, transactionData[i].CurrencyDDL, new { @class = "form-control currency-dropdown", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Currency_" + transactionData[i].RowId, transactionData[i].CurrencyDDL.SelectedValue)
                                                            @Html.ValidationMessage("Transaction_Currency_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            <div class="input-group">
                                                                <span class="input-group-addon" id="span-amount-foreign-symbol-@transactionData[i].RowId">@transactionData[i].Symbol</span>
                                                                @Html.TextBox("Transaction_AmountForeign_" + transactionData[i].RowId, transactionData[i].AmountForeign, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_AmountForeign_" + transactionData[i].RowId, transactionData[i].AmountForeign)
                                                            </div>
                                                            @Html.ValidationMessage("Transaction_AmountForeign_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_Rate_" + transactionData[i].RowId, transactionData[i].Rate, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Rate_" + transactionData[i].RowId, transactionData[i].Rate)
                                                            @Html.ValidationMessage("Transaction_Rate_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_EncashmentRate_" + transactionData[i].RowId, transactionData[i].EncashmentRate, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_EncashmentRate_" + transactionData[i].RowId, transactionData[i].EncashmentRate)
                                                            @Html.ValidationMessage("Transaction_EncashmentRate_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_Unit_" + transactionData[i].RowId, transactionData[i].Unit, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Unit_" + transactionData[i].RowId, transactionData[i].Unit)
                                                        </td>
                                                        <td>
                                                            <div class="input-group">
                                                                <span class="input-group-addon">$</span>
                                                                @Html.TextBox("Transaction_Amount_Local_" + transactionData[i].RowId, transactionData[i].AmountLocal, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_AmountLocal_" + transactionData[i].RowId, transactionData[i].AmountLocal.Replace(",", ""))
                                                            </div>
                                                            @Html.ValidationMessage("Transaction_AmountLocal_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                @Html.DropDownList("Transaction_PaymentMode_" + transactionData[i].RowId, transactionData[i].PaymentModeDDL, new { @class = "form-control", @onchange = "PaymentModeChange(" + transactionData[i].RowId + ")" })
                                                            }
                                                            else
                                                            {
                                                                @Html.DropDownList("Transaction_PaymentMode_" + transactionData[i].RowId, transactionData[i].PaymentModeDDL, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_PaymentMode_" + transactionData[i].RowId, transactionData[i].PaymentModeDDL.SelectedValue)
                                                            }
                                                            @Html.ValidationMessage("Transaction_PaymentMode_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                if (transactionData[i].DisabledChequeNo == "")
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_ChequeNo_" + transactionData[i].RowId, transactionData[i].ChequeNo, new { @class = "form-control", @readonly = "readonly" })</div>
                                                                    <div><a id="update-cheque-btn-@transactionData[i].RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" onclick="UpdateCheque(@transactionData[i].RowId)" style="text-decoration: none;" data-toggle="tooltip" data-original-title="Add Cheque"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                                else
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_ChequeNo_" + transactionData[i].RowId, transactionData[i].ChequeNo, new { @class = "form-control", @disabled = "disabled" })</div>
                                                                    <div><a id="update-cheque-btn-@transactionData[i].RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" style="text-decoration: none;pointer-events: none;" data-toggle="tooltip" data-original-title="Add Cheque"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                            }
                                                            else
                                                            {
                                                                @Html.TextBox("Transaction_ChequeNo_" + transactionData[i].RowId, transactionData[i].ChequeNo, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_ChequeNo_" + transactionData[i].RowId, transactionData[i].ChequeNo)
                                                            }
                                                            @Html.ValidationMessage("Transaction_ChequeNo_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                if (transactionData[i].DisabledBankTransferNo == "")
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_BankTransferNo_" + transactionData[i].RowId, transactionData[i].BankTransferNo, new { @class = "form-control", @readonly = "readonly" }) })</div>
                                                                    <div><a id="update-bank-transfer-btn-@transactionData[i].BankTransferNo" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" onclick="UpdateBankTransfer(@transactionData[i].BankTransferNo)" style="text-decoration: none;" data-toggle="tooltip" data-original-title="Add Bank Transfer"><i class="icon wb-edit" aria-hidden="true"></i></a></div>

                                                                }
                                                                else
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_BankTransferNo_" + transactionData[i].RowId, transactionData[i].BankTransferNo, new { @class = "form-control", @disabled = "disabled" })</div>
                                                                    <div><a id="update-bank-transfer-btn-@transactionData[i].RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" style="text-decoration: none;pointer-events: none;" data-toggle="tooltip" data-original-title="Add Bank Transfer"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                            }
                                                            else
                                                            {
                                                                @Html.TextBox("Transaction_BankTransferNo_" + transactionData[i].RowId, transactionData[i].BankTransferNo, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_BankTransferNo_" + transactionData[i].RowId, transactionData[i].BankTransferNo)
                                                            }
                                                            @Html.ValidationMessage("Transaction_BankTransferNo_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_VesselName_" + transactionData[i].RowId, transactionData[i].VesselName, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_VesselName_" + transactionData[i].RowId, transactionData[i].VesselName)
                                                            @Html.ValidationMessage("Transaction_VesselName_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            <button type="button" class="btn btn-xs btn-primary" onclick="OpenDenominationModal(@transactionData[i].RowId)">Update</button>
                                                            @Html.ValidationMessage("Transaction_Denomination_" + transactionData[i].RowId)
                                                            <div class="modal fade" id="modal-transaction-denomination-@transactionData[i].RowId" aria-hidden="false" aria-labelledby="modal-label-@transactionData[i].RowId"
                                                                 role="dialog" tabindex="-1">
                                                                <div class="modal-dialog modal-lg">
                                                                    <div class="modal-content form-horizontal">
                                                                        <div class="modal-header">
                                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                                <span aria-hidden="true">×</span>
                                                                            </button>
                                                                            <h4 class="modal-title" id="modal-label-@transactionData[i].RowId">Denomination - @transactionData[i].DenominationCurrencyCode</h4>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="row">
                                                                                <div class="form-group">
                                                                                    <div class="col-sm-10 col-sm-offset-1">
                                                                                        <table id="table-transaction-denomination-@transactionData[i].RowId" class="table table-hover table-condensed table-bordered" data-striped="true" data-height="250" data-mobile-responsive="true">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <th>Denomination</th>
                                                                                                    <th>Pieces</th>
                                                                                                    <th id="AmtCurr-@transactionData[i].RowId">Amt (@transactionData[i].DenominationCurrencyCode)</th>
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody>
                                                                                                @if (transactionData[i].Denominations.Count > 0)
                                                                                                {
                                                                                                    foreach (DenominationsData denomination in transactionData[i].Denominations)
                                                                                                    {
                                                                                                        if (denomination.DenominationValue == "coins")
                                                                                                        {
                                                                                                            <tr>
                                                                                                                <td>coins @Html.ValidationMessage("Denomination_Value_" + transactionData[i].RowId + "_" + denomination.DenoId) @Html.Hidden("Denomination_Value_" + transactionData[i].RowId + "_" + denomination.DenoId, denomination.DenominationValue)</td>
                                                                                                                <td>-</td>
                                                                                                                <td>
                                                                                                                    @if (sales.Status == "Pending Packing")
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_AmountForeign_" + transactionData[i].RowId + "_" + denomination.DenoId, denomination.AmountForeign, new { @class = "form-control denomination-amount-foreign", @onchange = "CoinsChange(" + transactionData[i].RowId + ", " + denomination.DenoId + ")" })
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_AmountForeign_" + transactionData[i].RowId + "_" + denomination.DenoId, denomination.AmountForeign, new { @class = "form-control denomination-amount-foreign", @onchange = "CoinsChange(" + transactionData[i].RowId + ", " + denomination.DenoId + ")", @readonly = "true" })
                                                                                                                    }
                                                                                                                    @Html.ValidationMessage("Denomination_Value_AmountForeign_" + transactionData[i].RowId + "_" + denomination.DenoId)
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            <tr>
                                                                                                                <td>@denomination.DenominationValue @Html.ValidationMessage("Denomination_Value_" + transactionData[i].RowId + "_" + denomination.DenoId) @Html.Hidden("Denomination_Value_" + transactionData[i].RowId + "_" + denomination.DenoId, denomination.DenominationValue)</td>
                                                                                                                <td>
                                                                                                                    @if (sales.Status == "Pending Packing")
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_Pieces_" + transactionData[i].RowId + "_" + denomination.DenoId, denomination.Pieces, new { @class = "form-control", @onchange = "PiecesChange(" + transactionData[i].RowId + ", " + denomination.DenoId + ")" })
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_Pieces_" + transactionData[i].RowId + "_" + denomination.DenoId, denomination.Pieces, new { @class = "form-control", @onchange = "PiecesChange(" + transactionData[i].RowId + ", " + denomination.DenoId + ")", @readonly = "true" })
                                                                                                                    }

                                                                                                                    @Html.ValidationMessage("Denomination_Value_Pieces_" + transactionData[i].RowId + "_" + denomination.DenoId)
                                                                                                                </td>
                                                                                                                <td><div id="denomination-amount-foreign-@transactionData[i].RowId-@denomination.DenoId">@denomination.AmountForeign</div>@Html.ValidationMessage("Denomination_Value_AmountForeign_" + transactionData[i].RowId + "_" + denomination.DenoId) @Html.Hidden("Denomination_Value_AmountForeign_" + transactionData[i].RowId + "_" + denomination.DenoId, denomination.AmountForeign.Replace(",", ""), new { @class = "denomination-amount-foreign" })</td>
                                                                                                            </tr>
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            </tbody>
                                                                                            <tfoot>
                                                                                                <tr>
                                                                                                    <td colspan="2" class="text-right">Total Calculated</td>
                                                                                                    <td><div id="denomination-total-calculated-foreign-symbol-@transactionData[i].RowId" style="float:left;">@transactionData[i].Symbol</div><div id="denomination-total-calculated-foreign-@transactionData[i].RowId">@transactionData[i].DenominationTotalCalculatedForeign</div>@Html.ValidationMessage("Denomination_Total_Calculated_Foreign_" + transactionData[i].RowId) @Html.Hidden("Denomination_Total_Calculated_Foreign_" + transactionData[i].RowId, transactionData[i].DenominationTotalCalculatedForeign)</td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td colspan="2" class="text-right">Remaining</td>
                                                                                                    <td><div id="denomination-remaining-foreign-symbol-@transactionData[i].RowId" style="float:left;">@transactionData[i].Symbol</div><div id="denomination-remaining-foreign-@transactionData[i].RowId">@transactionData[i].DenominationRemainingForeign</div>@Html.Hidden("Denomination_Remaining_Foreign_" + transactionData[i].RowId, transactionData[i].DenominationRemainingForeign)</td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td colspan="2" class="text-right">Total Order</td>
                                                                                                    <td><div id="denomination-total-order-foreign-symbol-@transactionData[i].RowId" style="float:left;">@transactionData[i].Symbol</div><div id="denomination-total-order-foreign-@transactionData[i].RowId">@transactionData[i].DenominationTotalOrderForeign</div>@Html.Hidden("Denomination_Total_Order_Foreign_" + transactionData[i].RowId, transactionData[i].DenominationTotalOrderForeign)</td>
                                                                                                </tr>
                                                                                            </tfoot>
                                                                                        </table>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-sm-10 col-sm-offset-1">
                                                                                    @if (sales.Status == "Pending Packing")
                                                                                    {
                                                                                        <button class="btn btn-primary btn-outline" data-dismiss="modal" type="button">Update</button>
                                                                                        <button class="btn btn-danger btn-outline" type="button" onclick="RemoveDenomination(@transactionData[i].RowId)">Remove Denomination</button>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <button class="btn btn-default btn-outline" data-dismiss="modal" type="button">Close</button>
                                                                                    }
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr id="transaction-row-@transactionData[i + 1].RowId" class="paired-row-@transactionData[i].RowId">
                                                        <td>
                                                            @transactionData[i + 1].TransactionID
                                                            @Html.Hidden("Transaction_ID_" + transactionData[i + 1].RowId, transactionData[i + 1].TransactionID)
                                                            @Html.Hidden("Transaction_TransactionId_" + transactionData[i + 1].RowId, transactionData[i + 1].ID)
                                                        </td>
                                                        <td>
                                                            @transactionData[i + 1].Type
                                                            @Html.Hidden("Transaction_Type_" + transactionData[i + 1].RowId, transactionData[i + 1].Type)
                                                        </td>
                                                        <td>
                                                            @Html.DropDownList("Transaction_Currency_" + transactionData[i + 1].RowId, transactionData[i + 1].CurrencyDDL, new { @class = "form-control currency-dropdown", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Currency_" + transactionData[i + 1].RowId, transactionData[i + 1].CurrencyDDL.SelectedValue)
                                                            @Html.ValidationMessage("Transaction_Currency_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            <div class="input-group">
                                                                <span class="input-group-addon" id="span-amount-foreign-symbol-@transactionData[i + 1].RowId">@transactionData[i + 1].Symbol</span>
                                                                @Html.TextBox("Transaction_Amount_Foreign_" + transactionData[i + 1].RowId, transactionData[i + 1].AmountForeign, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_AmountForeign_" + transactionData[i + 1].RowId, transactionData[i + 1].AmountForeign.Replace(",", ""))
                                                            </div>
                                                            @Html.ValidationMessage("Transaction_AmountForeign_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_rate_" + transactionData[i + 1].RowId, transactionData[i + 1].Rate, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Rate_" + transactionData[i + 1].RowId, transactionData[i + 1].Rate)
                                                            @Html.ValidationMessage("Transaction_Rate_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_Encashment_Rate_" + transactionData[i + 1].RowId, transactionData[i + 1].EncashmentRate, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_EncashmentRate_" + transactionData[i + 1].RowId, transactionData[i + 1].EncashmentRate)
                                                            @Html.ValidationMessage("Transaction_EncashmentRate_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_Unit_" + transactionData[i + 1].RowId, transactionData[i + 1].Unit, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Unit_" + transactionData[i + 1].RowId, transactionData[i + 1].Unit)
                                                        </td>
                                                        <td>
                                                            <div class="input-group">
                                                                <span class="input-group-addon">$</span>
                                                                @Html.TextBox("Transaction_Amount_Local_" + transactionData[i + 1].RowId, transactionData[i + 1].AmountLocal, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_AmountLocal_" + transactionData[i + 1].RowId, transactionData[i + 1].AmountLocal.Replace(",", ""))
                                                            </div>
                                                            @Html.ValidationMessage("Transaction_AmountLocal_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                @Html.DropDownList("Transaction_PaymentMode_" + transactionData[i + 1].RowId, transactionData[i + 1].PaymentModeDDL, new { @class = "form-control", @onchange = "PaymentModeChange(" + transactionData[i + 1].RowId + ")" })
                                                            }
                                                            else
                                                            {
                                                                @Html.DropDownList("Transaction_PaymentMode_" + transactionData[i + 1].RowId, transactionData[i + 1].PaymentModeDDL, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_PaymentMode_" + transactionData[i + 1].RowId, transactionData[i + 1].PaymentModeDDL.SelectedValue)
                                                            }
                                                            @Html.ValidationMessage("Transaction_PaymentMode_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                if (transactionData[i + 1].DisabledChequeNo == "")
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_ChequeNo_" + transactionData[i + 1].RowId, transactionData[i + 1].ChequeNo, new { @class = "form-control", @readonly = "readonly" })</div>
                                                                    <div><a id="update-cheque-btn-@transactionData[i + 1].RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" onclick="UpdateCheque(@transactionData[i + 1].RowId)" style="text-decoration: none;" data-toggle="tooltip" data-original-title="Add Cheque"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                                else
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_ChequeNo_" + transactionData[i + 1].RowId, transactionData[i + 1].ChequeNo, new { @class = "form-control", @disabled = "disabled" })</div>
                                                                    <div><a id="update-cheque-btn-@transactionData[i + 1].RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" style="text-decoration: none;pointer-events: none;" data-toggle="tooltip" data-original-title="Add Cheque"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                            }
                                                            else
                                                            {
                                                                @Html.TextBox("Transaction_ChequeNo_" + transactionData[i + 1].RowId, transactionData[i + 1].ChequeNo, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_ChequeNo_" + transactionData[i + 1].RowId, transactionData[i + 1].ChequeNo)
                                                            }
                                                            @Html.ValidationMessage("Transaction_ChequeNo_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                if (transactionData[i + 1].DisabledBankTransferNo == "")
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_BankTransferNo_" + transactionData[i + 1].RowId, transactionData[i + 1].BankTransferNo, new { @class = "form-control", @readonly = "readonly" })</div>
                                                                    <div><a id="update-bank-transfer-btn-@transactionData[i + 1].BankTransferNo" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" onclick="UpdateBankTransfer(@transactionData[i + 1].BankTransferNo)" style="text-decoration: none;" data-toggle="tooltip" data-original-title="Add Bank Transfer"><i class="icon wb-edit" aria-hidden="true"></i></a></div>

                                                                }
                                                                else
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_BankTransferNo_" + transactionData[i + 1].RowId, transactionData[i + 1].BankTransferNo, new { @class = "form-control", @disabled = "disabled" })</div>
                                                                    <div><a id="update-bank-transfer-btn-@transactionData[i + 1].BankTransferNo" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" style="text-decoration: none;pointer-events: none;" data-toggle="tooltip" data-original-title="Add Bank Transfer"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                            }
                                                            else
                                                            {
                                                                @Html.TextBox("Transaction_BankTransferNo_" + transactionData[i + 1].RowId, transactionData[i + 1].BankTransferNo, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_BankTransferNo_" + transactionData[i + 1].RowId, transactionData[i + 1].BankTransferNo)
                                                            }
                                                            @Html.ValidationMessage("Transaction_BankTransferNo_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_VesselName_" + transactionData[i + 1].RowId, transactionData[i + 1].VesselName, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.ValidationMessage("Transaction_VesselName_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td></td>
                                                    </tr>
                                                }
                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                    <th colspan="3" style="text-align: right;">Total (Foreign)</th>
                                                    <th>
                                                        <div id="total-amount-foreign">$@ViewData["TotalForeign"].ToString()</div>
                                                    </th>
                                                    <th colspan="3" style="text-align: right;">Total (Local)</th>
                                                    <th>
                                                        <div id="total-amount-local">$@ViewData["TotalLocal"].ToString()</div>
                                                    </th>
                                                    <th colspan="5"></th>
                                                </tr>
                                            </tfoot>
                                        }
                                        else if (ViewData["SaleTransactionType"].ToString() == "Cross Currency")
                                        {
                                            <thead>
                                                <tr>
                                                    <th style="min-width: 50px;">ID</th>
                                                    <th style="min-width: 50px;">Type</th>
                                                    <th style="min-width: 150px;">Currency</th>
                                                    <th style="min-width: 200px;">Amount (Foreign)</th>
                                                    <th style="min-width: 150px;">Rate</th>
                                                    <th style="min-width: 150px;">Cross Rate</th>
                                                    <th style="min-width: 150px;">Unit</th>
                                                    <th style="min-width: 200px;">Amount (Local)</th>
                                                    <th style="min-width: 150px;">Payment Mode</th>
                                                    <th style="min-width: 200px;">Cheque No.</th>
                                                    <th style="min-width: 200px;">Bank Transfer No.</th>
                                                    <th style="min-width: 200px;">Vessel Name</th>
                                                    <th style="min-width: 100px;">Outgoing Denomination</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @for (int i = 0; i < transactionData.Count; i += 2)
                                                {
                                                    <tr id="transaction-row-@transactionData[i].RowId" class="paired-row-@transactionData[i].RowId">
                                                        <td>
                                                            @transactionData[i].TransactionID
                                                            @Html.Hidden("Transaction_ID_" + transactionData[i].RowId, transactionData[i].TransactionID)
                                                            @Html.Hidden("Transaction_TransactionId_" + transactionData[i].RowId, transactionData[i].ID)
                                                        </td>
                                                        <td>
                                                            @transactionData[i].Type
                                                            @Html.Hidden("Transaction_Type_" + transactionData[i].RowId, transactionData[i].Type)
                                                        </td>
                                                        <td>
                                                            @Html.DropDownList("Transaction_Currency_" + transactionData[i].RowId, transactionData[i].CurrencyDDL, new { @class = "form-control currency-dropdown", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Currency_" + transactionData[i].RowId, transactionData[i].CurrencyDDL.SelectedValue)
                                                            @Html.ValidationMessage("Transaction_Currency_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            <div class="input-group">
                                                                <span class="input-group-addon" id="span-amount-foreign-symbol-@transactionData[i].RowId">@transactionData[i].Symbol</span>
                                                                @Html.TextBox("Transaction_AmountForeign_" + transactionData[i].RowId, transactionData[i].AmountForeign, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_AmountForeign_" + transactionData[i].RowId, transactionData[i].AmountForeign)
                                                            </div>
                                                            @Html.ValidationMessage("Transaction_AmountForeign_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_Rate_" + transactionData[i].RowId, transactionData[i].Rate, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Rate_" + transactionData[i].RowId, transactionData[i].Rate)
                                                            @Html.ValidationMessage("Transaction_Rate_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_CrossRate_" + transactionData[i].RowId, transactionData[i].CrossRate, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_CrossRate_" + transactionData[i].RowId, transactionData[i].CrossRate)
                                                            @Html.ValidationMessage("Transaction_CrossRate_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_Unit_" + transactionData[i].RowId, transactionData[i].Unit, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Unit_" + transactionData[i].RowId, transactionData[i].Unit)
                                                        </td>
                                                        <td>
                                                            <div class="input-group">
                                                                <span class="input-group-addon">$</span>
                                                                @Html.TextBox("Transaction_Amount_Local_" + transactionData[i].RowId, transactionData[i].AmountLocal, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_AmountLocal_" + transactionData[i].RowId, transactionData[i].AmountLocal.Replace(",", ""))
                                                            </div>
                                                            @Html.ValidationMessage("Transaction_AmountLocal_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                @Html.DropDownList("Transaction_PaymentMode_" + transactionData[i].RowId, transactionData[i].PaymentModeDDL, new { @class = "form-control", @onchange = "PaymentModeChange(" + transactionData[i].RowId + ")" })
                                                            }
                                                            else
                                                            {
                                                                @Html.DropDownList("Transaction_PaymentMode_" + transactionData[i].RowId, transactionData[i].PaymentModeDDL, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_PaymentMode_" + transactionData[i].RowId, transactionData[i].PaymentModeDDL.SelectedValue)
                                                            }
                                                            @Html.ValidationMessage("Transaction_PaymentMode_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                if (transactionData[i].DisabledChequeNo == "")
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_ChequeNo_" + transactionData[i].RowId, transactionData[i].ChequeNo, new { @class = "form-control", @readonly = "readonly" })</div>
                                                                    <div><a id="update-cheque-btn-@transactionData[i].RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" onclick="UpdateCheque(@transactionData[i].RowId)" style="text-decoration: none;" data-toggle="tooltip" data-original-title="Add Cheque"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                                else
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_ChequeNo_" + transactionData[i].RowId, transactionData[i].ChequeNo, new { @class = "form-control", @disabled = "disabled" })</div>
                                                                    <div><a id="update-cheque-btn-@transactionData[i].RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" style="text-decoration: none;pointer-events: none;" data-toggle="tooltip" data-original-title="Add Cheque"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                            }
                                                            else
                                                            {
                                                                @Html.TextBox("Transaction_ChequeNo_" + transactionData[i].RowId, transactionData[i].ChequeNo, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_ChequeNo_" + transactionData[i].RowId, transactionData[i].ChequeNo)
                                                            }
                                                            @Html.ValidationMessage("Transaction_ChequeNo_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                if (transactionData[i].DisabledBankTransferNo == "")
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_BankTransferNo_" + transactionData[i].RowId, transactionData[i].BankTransferNo, new { @class = "form-control", @readonly = "readonly" })</div>
                                                                    <div><a id="update-bank-transfer-btn-@transactionData[i].RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" onclick="UpdateBankTransfer(@transactionData[i].RowId)" style="text-decoration: none;" data-toggle="tooltip" data-original-title="Add Bank Transfer"><i class="icon wb-edit" aria-hidden="true"></i></a></div>

                                                                }
                                                                else
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_BankTransferNo_" + transactionData[i].RowId, transactionData[i].BankTransferNo, new { @class = "form-control", @disabled = "disabled" })</div>
                                                                    <div><a id="update-bank-transfer-btn-@transactionData[i].RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" style="text-decoration: none;pointer-events: none;" data-toggle="tooltip" data-original-title="Add Bank Transfer"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                            }
                                                            else
                                                            {
                                                                @Html.TextBox("Transaction_BankTransferNo_" + transactionData[i].RowId, transactionData[i].BankTransferNo, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_BankTransferNo_" + transactionData[i].RowId, transactionData[i].BankTransferNo)
                                                            }
                                                            @Html.ValidationMessage("Transaction_BankTransferNo_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_VesselName_" + transactionData[i].RowId, transactionData[i].VesselName, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_VesselName_" + transactionData[i].RowId, transactionData[i].VesselName)
                                                            @Html.ValidationMessage("Transaction_VesselName_" + transactionData[i].RowId)
                                                        </td>
                                                        <td>
                                                            <button type="button" class="btn btn-xs btn-primary" onclick="OpenDenominationModal(@transactionData[i].RowId)">Update</button>
                                                            @Html.ValidationMessage("Transaction_Denomination_" + transactionData[i].RowId)
                                                            <div class="modal fade" id="modal-transaction-denomination-@transactionData[i].RowId" aria-hidden="false" aria-labelledby="modal-label-@transactionData[i].RowId"
                                                                 role="dialog" tabindex="-1">
                                                                <div class="modal-dialog modal-lg">
                                                                    <div class="modal-content form-horizontal">
                                                                        <div class="modal-header">
                                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                                <span aria-hidden="true">×</span>
                                                                            </button>
                                                                            <h4 class="modal-title" id="modal-label-@transactionData[i].RowId">Denomination - @transactionData[i].DenominationCurrencyCode</h4>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="row">
                                                                                <div class="form-group">
                                                                                    <div class="col-sm-10 col-sm-offset-1">
                                                                                        <table id="table-transaction-denomination-@transactionData[i].RowId" class="table table-hover table-condensed table-bordered" data-striped="true" data-height="250" data-mobile-responsive="true">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <th>Denomination</th>
                                                                                                    <th>Pieces</th>
                                                                                                    <th id="AmtCurr-@transactionData[i].RowId">Amt (@transactionData[i].DenominationCurrencyCode)</th>
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody>
                                                                                                @if (transactionData[i].Denominations.Count > 0)
                                                                                                {
                                                                                                    foreach (DenominationsData denomination in transactionData[i].Denominations)
                                                                                                    {
                                                                                                        if (denomination.DenominationValue == "coins")
                                                                                                        {
                                                                                                            <tr>
                                                                                                                <td>coins @Html.ValidationMessage("Denomination_Value_" + transactionData[i].RowId + "_" + denomination.DenoId) @Html.Hidden("Denomination_Value_" + transactionData[i].RowId + "_" + denomination.DenoId, denomination.DenominationValue)</td>
                                                                                                                <td>-</td>
                                                                                                                <td>
                                                                                                                    @if (sales.Status == "Pending Packing")
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_AmountForeign_" + transactionData[i].RowId + "_" + denomination.DenoId, denomination.AmountForeign, new { @class = "form-control denomination-amount-foreign", @onchange = "CoinsChange(" + transactionData[i].RowId + ", " + denomination.DenoId + ")" })
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_AmountForeign_" + transactionData[i].RowId + "_" + denomination.DenoId, denomination.AmountForeign, new { @class = "form-control denomination-amount-foreign", @onchange = "CoinsChange(" + transactionData[i].RowId + ", " + denomination.DenoId + ")", @readonly = "true" })
                                                                                                                    }
                                                                                                                    @Html.ValidationMessage("Denomination_Value_AmountForeign_" + transactionData[i].RowId + "_" + denomination.DenoId)
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            <tr>
                                                                                                                <td>@denomination.DenominationValue @Html.ValidationMessage("Denomination_Value_" + transactionData[i].RowId + "_" + denomination.DenoId) @Html.Hidden("Denomination_Value_" + transactionData[i].RowId + "_" + denomination.DenoId, denomination.DenominationValue)</td>
                                                                                                                <td>
                                                                                                                    @if (sales.Status == "Pending Packing")
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_Pieces_" + transactionData[i].RowId + "_" + denomination.DenoId, denomination.Pieces, new { @class = "form-control", @onchange = "PiecesChange(" + transactionData[i].RowId + ", " + denomination.DenoId + ")" })
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_Pieces_" + transactionData[i].RowId + "_" + denomination.DenoId, denomination.Pieces, new { @class = "form-control", @onchange = "PiecesChange(" + transactionData[i].RowId + ", " + denomination.DenoId + ")", @readonly = "true" })
                                                                                                                    }
                                                                                                                    @Html.ValidationMessage("Denomination_Value_Pieces_" + transactionData[i].RowId + "_" + denomination.DenoId)
                                                                                                                </td>
                                                                                                                <td><div id="denomination-amount-foreign-@transactionData[i].RowId-@denomination.DenoId">@denomination.AmountForeign</div>@Html.ValidationMessage("Denomination_Value_AmountForeign_" + transactionData[i].RowId + "_" + denomination.DenoId) @Html.Hidden("Denomination_Value_AmountForeign_" + transactionData[i].RowId + "_" + denomination.DenoId, denomination.AmountForeign.Replace(",", ""), new { @class = "denomination-amount-foreign" })</td>
                                                                                                            </tr>
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            </tbody>
                                                                                            <tfoot>
                                                                                                <tr>
                                                                                                    <td colspan="2" class="text-right">Total Calculated</td>
                                                                                                    <td><div id="denomination-total-calculated-foreign-symbol-@transactionData[i].RowId" style="float:left;">@transactionData[i].Symbol</div><div id="denomination-total-calculated-foreign-@transactionData[i].RowId">@transactionData[i].DenominationTotalCalculatedForeign</div>@Html.ValidationMessage("Denomination_Total_Calculated_Foreign_" + transactionData[i].RowId) @Html.Hidden("Denomination_Total_Calculated_Foreign_" + transactionData[i].RowId, transactionData[i].DenominationTotalCalculatedForeign)</td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td colspan="2" class="text-right">Remaining</td>
                                                                                                    <td><div id="denomination-remaining-foreign-symbol-@transactionData[i].RowId" style="float:left;">@transactionData[i].Symbol</div><div id="denomination-remaining-foreign-@transactionData[i].RowId">@transactionData[i].DenominationRemainingForeign</div>@Html.Hidden("Denomination_Remaining_Foreign_" + transactionData[i].RowId, transactionData[i].DenominationRemainingForeign)</td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td colspan="2" class="text-right">Total Order</td>
                                                                                                    <td><div id="denomination-total-order-foreign-symbol-@transactionData[i].RowId" style="float:left;">@transactionData[i].Symbol</div><div id="denomination-total-order-foreign-@transactionData[i].RowId">@transactionData[i].DenominationTotalOrderForeign</div>@Html.Hidden("Denomination_Total_Order_Foreign_" + transactionData[i].RowId, transactionData[i].DenominationTotalOrderForeign)</td>
                                                                                                </tr>
                                                                                            </tfoot>
                                                                                        </table>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-sm-10 col-sm-offset-1">
                                                                                    @if (sales.Status == "Pending Packing")
                                                                                    {
                                                                                        <button class="btn btn-primary btn-outline" data-dismiss="modal" type="button">Update</button>
                                                                                        <button class="btn btn-danger btn-outline" type="button" onclick="RemoveDenomination(@transactionData[i].RowId)">Remove Denomination</button>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <button class="btn btn-default btn-outline" data-dismiss="modal" type="button">Close</button>
                                                                                    }
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr id="transaction-row-@transactionData[i + 1].RowId" class="paired-row-@transactionData[i].RowId">
                                                        <td>
                                                            @transactionData[i + 1].TransactionID
                                                            @Html.Hidden("Transaction_ID_" + transactionData[i + 1].RowId, transactionData[i + 1].TransactionID)
                                                            @Html.Hidden("Transaction_TransactionId_" + transactionData[i + 1].RowId, transactionData[i + 1].ID)
                                                        </td>
                                                        <td>
                                                            @transactionData[i + 1].Type
                                                            @Html.Hidden("Transaction_Type_" + transactionData[i + 1].RowId, transactionData[i + 1].Type)
                                                        </td>
                                                        <td>
                                                            @Html.DropDownList("Transaction_Currency_" + transactionData[i + 1].RowId, transactionData[i + 1].CurrencyDDL, new { @class = "form-control currency-dropdown", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Currency_" + transactionData[i + 1].RowId, transactionData[i + 1].CurrencyDDL.SelectedValue)
                                                            @Html.ValidationMessage("Transaction_Currency_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            <div class="input-group">
                                                                <span class="input-group-addon" id="span-amount-foreign-symbol-@transactionData[i + 1].RowId">@transactionData[i + 1].Symbol</span>
                                                                @Html.TextBox("Transaction_AmountForeign_" + transactionData[i + 1].RowId, transactionData[i + 1].AmountForeign, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_AmountForeign_" + transactionData[i + 1].RowId, transactionData[i + 1].AmountForeign)
                                                            </div>
                                                            @Html.ValidationMessage("Transaction_AmountForeign_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_Rate_" + transactionData[i + 1].RowId, transactionData[i + 1].Rate, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Rate_" + transactionData[i + 1].RowId, transactionData[i + 1].Rate)
                                                            @Html.ValidationMessage("Transaction_Rate_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_CrossRate_" + transactionData[i + 1].RowId, null, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_CrossRate_" + transactionData[i + 1].RowId)
                                                            @Html.ValidationMessage("Transaction_CrossRate_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_Unit_" + transactionData[i + 1].RowId, transactionData[i + 1].Unit, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_Unit_" + transactionData[i + 1].RowId, transactionData[i + 1].Unit)
                                                        </td>
                                                        <td>
                                                            <div class="input-group">
                                                                <span class="input-group-addon">$</span>
                                                                @Html.TextBox("Transaction_Amount_Local_" + transactionData[i + 1].RowId, transactionData[i + 1].AmountLocal, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_AmountLocal_" + transactionData[i + 1].RowId, transactionData[i + 1].AmountLocal.Replace(",", ""))
                                                            </div>
                                                            @Html.ValidationMessage("Transaction_AmountLocal_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                @Html.DropDownList("Transaction_PaymentMode_" + transactionData[i + 1].RowId, transactionData[i + 1].PaymentModeDDL, new { @class = "form-control", @onchange = "PaymentModeChange(" + transactionData[i + 1].RowId + ")" })
                                                            }
                                                            else
                                                            {
                                                                @Html.DropDownList("Transaction_PaymentMode_" + transactionData[i + 1].RowId, transactionData[i + 1].PaymentModeDDL, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_PaymentMode_" + transactionData[i + 1].RowId, transactionData[i + 1].PaymentModeDDL.SelectedValue)
                                                            }
                                                            @Html.ValidationMessage("Transaction_PaymentMode_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                if (transactionData[i + 1].DisabledChequeNo == "")
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_ChequeNo_" + transactionData[i + 1].RowId, transactionData[i + 1].ChequeNo, new { @class = "form-control", @readonly = "readonly" })</div>
                                                                    <div><a id="update-cheque-btn-@transactionData[i + 1].RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" onclick="UpdateCheque(@transactionData[i + 1].RowId)" style="text-decoration: none;" data-toggle="tooltip" data-original-title="Add Cheque"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                                else
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_ChequeNo_" + transactionData[i + 1].RowId, transactionData[i + 1].ChequeNo, new { @class = "form-control", @disabled = "disabled" })</div>
                                                                    <div><a id="update-cheque-btn-@transactionData[i + 1].RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" style="text-decoration: none;pointer-events: none;" data-toggle="tooltip" data-original-title="Add Cheque"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                            }
                                                            else
                                                            {
                                                                @Html.TextBox("Transaction_ChequeNo_" + transactionData[i + 1].RowId, transactionData[i + 1].ChequeNo, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_ChequeNo_" + transactionData[i + 1].RowId, transactionData[i + 1].ChequeNo)
                                                            }
                                                            @Html.ValidationMessage("Transaction_ChequeNo_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            @if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                                                            {
                                                                if (transactionData[i + 1].DisabledBankTransferNo == "")
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_BankTransferNo_" + transactionData[i + 1].RowId, transactionData[i + 1].BankTransferNo, new { @class = "form-control", @readonly = "readonly" })</div>
                                                                    <div><a id="update-bank-transfer-btn-@transactionData[i + 1].RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" onclick="UpdateBankTransfer(@transactionData[i + 1].RowId)" style="text-decoration: none;" data-toggle="tooltip" data-original-title="Add Bank Transfer"><i class="icon wb-edit" aria-hidden="true"></i></a></div>

                                                                }
                                                                else
                                                                {
                                                                    <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:80%;">@Html.TextBox("Transaction_BankTransferNo_" + transactionData[i + 1].RowId, transactionData[i + 1].BankTransferNo, new { @class = "form-control", @disabled = "disabled" })</div>
                                                                    <div><a id="update-bank-transfer-btn-@transactionData[i + 1].RowId" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" style="text-decoration: none;pointer-events: none;" data-toggle="tooltip" data-original-title="Add Bank Transfer"><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                                                }
                                                            }
                                                            else
                                                            {
                                                                @Html.TextBox("Transaction_BankTransferNo_" + transactionData[i + 1].RowId, transactionData[i + 1].BankTransferNo, new { @class = "form-control", @disabled = "disabled" })
                                                                @Html.Hidden("Transaction_BankTransferNo_" + transactionData[i + 1].RowId, transactionData[i + 1].BankTransferNo)
                                                            }
                                                            @Html.ValidationMessage("Transaction_BankTransferNo_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("Transaction_VesselName_" + transactionData[i + 1].RowId, transactionData[i + 1].VesselName, new { @class = "form-control", @disabled = "disabled" })
                                                            @Html.Hidden("Transaction_VesselName_" + transactionData[i + 1].RowId, transactionData[i + 1].VesselName)
                                                            @Html.ValidationMessage("Transaction_VesselName_" + transactionData[i + 1].RowId)
                                                        </td>
                                                        <td>
                                                            <button type="button" class="btn btn-xs btn-primary" onclick="OpenDenominationModal(@transactionData[i + 1].RowId)">Update</button>
                                                            @Html.ValidationMessage("Transaction_Denomination_" + transactionData[i + 1].RowId)
                                                            <div class="modal fade" id="modal-transaction-denomination-@transactionData[i + 1].RowId" aria-hidden="false" aria-labelledby="modal-label-@transactionData[i + 1].RowId"
                                                                 role="dialog" tabindex="-1">
                                                                <div class="modal-dialog modal-lg">
                                                                    <div class="modal-content form-horizontal">
                                                                        <div class="modal-header">
                                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                                <span aria-hidden="true">×</span>
                                                                            </button>
                                                                            <h4 class="modal-title" id="modal-label-@transactionData[i + 1].RowId">Denomination - @transactionData[i + 1].DenominationCurrencyCode</h4>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="row">
                                                                                <div class="form-group">
                                                                                    <div class="col-sm-10 col-sm-offset-1">
                                                                                        <table id="table-transaction-denomination-@transactionData[i + 1].RowId" class="table table-hover table-condensed table-bordered" data-striped="true" data-height="250" data-mobile-responsive="true">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <th>Denomination</th>
                                                                                                    <th>Pieces</th>
                                                                                                    <th id="AmtCurr-@transactionData[i + 1].RowId">Amt (@transactionData[i + 1].DenominationCurrencyCode)</th>
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody>
                                                                                                @if (transactionData[i + 1].Denominations.Count > 0)
                                                                                                {
                                                                                                    foreach (DenominationsData denomination in transactionData[i + 1].Denominations)
                                                                                                    {
                                                                                                        if (denomination.DenominationValue == "coins")
                                                                                                        {
                                                                                                            <tr>
                                                                                                                <td>coins @Html.ValidationMessage("Denomination_Value_" + transactionData[i + 1].RowId + "_" + denomination.DenoId) @Html.Hidden("Denomination_Value_" + transactionData[i + 1].RowId + "_" + denomination.DenoId, denomination.DenominationValue)</td>
                                                                                                                <td>-</td>
                                                                                                                <td>
                                                                                                                    @if (sales.Status == "Pending Packing")
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_AmountForeign_" + transactionData[i + 1].RowId + "_" + denomination.DenoId, denomination.AmountForeign, new { @class = "form-control denomination-amount-foreign", @onchange = "CoinsChange(" + transactionData[i + 1].RowId + ", " + denomination.DenoId + ")" })
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_AmountForeign_" + transactionData[i + 1].RowId + "_" + denomination.DenoId, denomination.AmountForeign, new { @class = "form-control denomination-amount-foreign", @onchange = "CoinsChange(" + transactionData[i + 1].RowId + ", " + denomination.DenoId + ")", @readonly = "true" })
                                                                                                                    }
                                                                                                                    @Html.ValidationMessage("Denomination_Value_AmountForeign_" + transactionData[i + 1].RowId + "_" + denomination.DenoId)
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            <tr>
                                                                                                                <td>@denomination.DenominationValue @Html.ValidationMessage("Denomination_Value_" + transactionData[i + 1].RowId + "_" + denomination.DenoId) @Html.Hidden("Denomination_Value_" + transactionData[i + 1].RowId + "_" + denomination.DenoId, denomination.DenominationValue)</td>
                                                                                                                <td>
                                                                                                                    @if (sales.Status == "Pending Packing")
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_Pieces_" + transactionData[i + 1].RowId + "_" + denomination.DenoId, denomination.Pieces, new { @class = "form-control", @onchange = "PiecesChange(" + transactionData[i + 1].RowId + ", " + denomination.DenoId + ")" })
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        @Html.TextBox("Denomination_Value_Pieces_" + transactionData[i + 1].RowId + "_" + denomination.DenoId, denomination.Pieces, new { @class = "form-control", @onchange = "PiecesChange(" + transactionData[i + 1].RowId + ", " + denomination.DenoId + ")", @readonly = "true" })
                                                                                                                    }
                                                                                                                    @Html.ValidationMessage("Denomination_Value_Pieces_" + transactionData[i + 1].RowId + "_" + denomination.DenoId)
                                                                                                                </td>
                                                                                                                <td><div id="denomination-amount-foreign-@transactionData[i + 1].RowId-@denomination.DenoId">@denomination.AmountForeign</div>@Html.ValidationMessage("Denomination_Value_AmountForeign_" + transactionData[i + 1].RowId + "_" + denomination.DenoId) @Html.Hidden("Denomination_Value_AmountForeign_" + transactionData[i + 1].RowId + "_" + denomination.DenoId, denomination.AmountForeign.Replace(",", ""), new { @class = "denomination-amount-foreign" })</td>
                                                                                                            </tr>
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            </tbody>
                                                                                            <tfoot>
                                                                                                <tr>
                                                                                                    <td colspan="2" class="text-right">Total Calculated</td>
                                                                                                    <td><div id="denomination-total-calculated-foreign-symbol-@transactionData[i + 1].RowId" style="float:left;">@transactionData[i + 1].Symbol</div><div id="denomination-total-calculated-foreign-@transactionData[i + 1].RowId">@transactionData[i + 1].DenominationTotalCalculatedForeign</div>@Html.ValidationMessage("Denomination_Total_Calculated_Foreign_" + transactionData[i + 1].RowId) @Html.Hidden("Denomination_Total_Calculated_Foreign_" + transactionData[i + 1].RowId, transactionData[i + 1].DenominationTotalCalculatedForeign)</td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td colspan="2" class="text-right">Remaining</td>
                                                                                                    <td><div id="denomination-remaining-foreign-symbol-@transactionData[i + 1].RowId" style="float:left;">@transactionData[i + 1].Symbol</div><div id="denomination-remaining-foreign-@transactionData[i + 1].RowId">@transactionData[i + 1].DenominationRemainingForeign</div>@Html.Hidden("Denomination_Remaining_Foreign_" + transactionData[i + 1].RowId, transactionData[i + 1].DenominationRemainingForeign)</td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td colspan="2" class="text-right">Total Order</td>
                                                                                                    <td><div id="denomination-total-order-foreign-symbol-@transactionData[i + 1].RowId" style="float:left;">@transactionData[i + 1].Symbol</div><div id="denomination-total-order-foreign-@transactionData[i + 1].RowId">@transactionData[i + 1].DenominationTotalOrderForeign</div>@Html.Hidden("Denomination_Total_Order_Foreign_" + transactionData[i + 1].RowId, transactionData[i + 1].DenominationTotalOrderForeign)</td>
                                                                                                </tr>
                                                                                            </tfoot>
                                                                                        </table>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-sm-10 col-sm-offset-1">
                                                                                    @if (sales.Status == "Pending Packing")
                                                                                    {
                                                                                        <button class="btn btn-primary btn-outline" data-dismiss="modal" type="button">Update</button>
                                                                                        <button class="btn btn-danger btn-outline" type="button" onclick="RemoveDenomination(@transactionData[i + 1].RowId)">Remove Denomination</button>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <button class="btn btn-default btn-outline" data-dismiss="modal" type="button">Close</button>
                                                                                    }
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                }
                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                    <th colspan="3" style="text-align: right;">Total (Foreign)</th>
                                                    <th>
                                                        <div id="total-amount-foreign">$@ViewData["TotalForeign"].ToString()</div>
                                                    </th>
                                                    <th colspan="3" style="text-align: right;">Total (Local)</th>
                                                    <th>
                                                        <div id="total-amount-local">$@ViewData["TotalLocal"].ToString()</div>
                                                    </th>
                                                    <th colspan="5"></th>
                                                </tr>
                                            </tfoot>
                                        }
                                    }
                                }
                            </table>
                        </div>
                    </div>

                    string localPaymentMode = "disabled";

                    if (sales.Status == "Pending Accounts" || sales.Status == "Pending Cashier")
                    {
                        localPaymentMode = "";
                    }
                    <div id="local-payment-mode" class="form-group">
                        @Html.LabelFor(s => sales.LocalPaymentMode, new { @class = "col-sm-3 control-label" })
                        <div class="col-sm-3 margin-bottom-20">
                            <span class="checkbox-custom checkbox-primary">
                                <input class="form-control" type="checkbox" id="cash" name="sales.LocalPaymentMode" value="Cash" onchange="LocalPaymentModeClick('cash', 'payment-mode-cash')" @ViewData["LocalPaymentModeCashCheckbox"].ToString() @localPaymentMode />
                                <label for="cash">Cash</label>
                            </span>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <div class="input-group">
                                    <span class="input-group-addon">SGD $</span>
                                    @Html.TextBoxFor(s => sales.CashAmount, "{0:#,##0.00}", new { @class = "form-control payment-mode-cash", @placeholder = "Cash Amount", @onchange = "LocalPaymentAmountChange('sales_CashAmount')", @disabled = "disabled" })
                                </div>
                                @Html.ValidationMessageFor(s => sales.CashAmount)
                            </div>
                        </div>
                        <div class="col-sm-6 col-sm-offset-6">
                            <div class="form-group">
                                @Html.DropDownListFor(s => sales.CashBank, (SelectList)ViewData["CashBankDropdown"], new { @class = "form-control payment-mode-cash", @data_plugin = "select2", @data_placeholder = "Cash Bank", @data_allow_clear = "true", @disabled = "disabled" })
                                @Html.ValidationMessageFor(s => sales.CashBank)
                            </div>
                        </div>

                        <div class="col-sm-3 col-sm-offset-3">
                            <span class="checkbox-custom checkbox-primary">
                                <input class="form-control" type="checkbox" id="cheque-1" name="sales.LocalPaymentMode" value="Cheque 1" onchange="LocalPaymentModeClick('cheque-1', 'payment-mode-cheque-1')" @ViewData["LocalPaymentModeCheque1Checkbox"].ToString() @localPaymentMode />
                                <label for="cheque-1">Cheque 1</label>
                            </span>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:100%;" id="update-chequeNo1-input-div">@Html.TextBoxFor(s => sales.Cheque1No, new { @class = "form-control payment-mode-cheque-1", @placeholder = "Cheque 1 No.", @disabled = "disabled" })</div>
                                <div style="display:none;" id="update-chequeNo1-div"><a id="update-chequeNo1-btn" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" onclick="UpdateCheque1No()" style="text-decoration: none;" data-toggle="tooltip" data-original-title="Update Cheque 1 No."><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                @Html.ValidationMessageFor(s => sales.Cheque1No)
                            </div>
                        </div>
                        <div class="col-sm-6 col-sm-offset-6">
                            <div class="form-group">
                                <div class="input-group">
                                    <span class="input-group-addon">SGD $</span>
                                    @Html.TextBoxFor(s => sales.Cheque1Amount, "{0:#,##0.00}", new { @class = "form-control payment-mode-cheque-1", @placeholder = "Cheque 1 Amount", @onchange = "LocalPaymentAmountChange('sales_Cheque1Amount')", @disabled = "disabled" })
                                </div>
                                @Html.ValidationMessageFor(s => sales.Cheque1Amount)
                            </div>
                        </div>
                        <div class="col-sm-6 col-sm-offset-6">
                            <div class="form-group">
                                @Html.DropDownListFor(s => sales.Cheque1Bank, (SelectList)ViewData["Cheque1BankDropdown"], new { @class = "form-control payment-mode-cheque-1", @data_plugin = "select2", @data_placeholder = "Cheque 1 Bank", @data_allow_clear = "true", @disabled = "disabled" })
                                @Html.ValidationMessageFor(s => sales.Cheque1Bank)
                            </div>
                        </div>

                        <div class="col-sm-3 col-sm-offset-3">
                            <span class="checkbox-custom checkbox-primary">
                                <input class="form-control" type="checkbox" id="cheque-2" name="sales.LocalPaymentMode" value="Cheque 2" onchange="LocalPaymentModeClick('cheque-2', 'payment-mode-cheque-2')" @ViewData["LocalPaymentModeCheque2Checkbox"].ToString() @localPaymentMode />
                                <label for="cheque-2">Cheque 2</label>
                            </span>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:100%;" id="update-chequeNo2-input-div">@Html.TextBoxFor(s => sales.Cheque2No, new { @class = "form-control payment-mode-cheque-2", @placeholder = "Cheque 2 No.", @disabled = "disabled" })</div>
                                <div style="display:none;" id="update-chequeNo2-div"><a id="update-chequeNo2-btn" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" onclick="UpdateCheque2No()" style="text-decoration: none;" data-toggle="tooltip" data-original-title="Update Cheque 2 No."><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                @Html.ValidationMessageFor(s => sales.Cheque2No)
                            </div>
                        </div>
                        <div class="col-sm-6 col-sm-offset-6">
                            <div class="form-group">
                                <div class="input-group">
                                    <span class="input-group-addon">SGD $</span>
                                    @Html.TextBoxFor(s => sales.Cheque2Amount, "{0:#,##0.00}", new { @class = "form-control payment-mode-cheque-2", @placeholder = "Cheque 2 Amount", @onchange = "LocalPaymentAmountChange('sales_Cheque2Amount')", @disabled = "disabled" })
                                </div>
                                @Html.ValidationMessageFor(s => sales.Cheque2Amount)
                            </div>
                        </div>
                        <div class="col-sm-6 col-sm-offset-6">
                            <div class="form-group">
                                @Html.DropDownListFor(s => sales.Cheque2Bank, (SelectList)ViewData["Cheque2BankDropdown"], new { @class = "form-control payment-mode-cheque-2", @data_plugin = "select2", @data_placeholder = "Cheque 2 Bank", @data_allow_clear = "true", @disabled = "disabled" })
                                @Html.ValidationMessageFor(s => sales.Cheque2Bank)
                            </div>
                        </div>

                        <div class="col-sm-3 col-sm-offset-3">
                            <span class="checkbox-custom checkbox-primary">
                                <input class="form-control" type="checkbox" id="cheque-3" name="sales.LocalPaymentMode" value="Cheque 3" onchange="LocalPaymentModeClick('cheque-3', 'payment-mode-cheque-3')" @ViewData["LocalPaymentModeCheque3Checkbox"].ToString() @localPaymentMode />
                                <label for="cheque-3">Cheque 3</label>
                            </span>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:100%;" id="update-chequeNo3-input-div">@Html.TextBoxFor(s => sales.Cheque3No, new { @class = "form-control payment-mode-cheque-3", @placeholder = "Cheque 3 No.", @disabled = "disabled" })</div>
                                <div style="display:none;" id="update-chequeNo3-div"><a id="update-chequeNo3-btn" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" onclick="UpdateCheque3No()" style="text-decoration: none;" data-toggle="tooltip" data-original-title="Update Cheque 3 No."><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                @Html.ValidationMessageFor(s => sales.Cheque3No)
                            </div>
                        </div>
                        <div class="col-sm-6 col-sm-offset-6">
                            <div class="form-group">
                                <div class="input-group">
                                    <span class="input-group-addon">SGD $</span>
                                    @Html.TextBoxFor(s => sales.Cheque3Amount, "{0:#,##0.00}", new { @class = "form-control payment-mode-cheque-3", @placeholder = "Cheque 3 Amount", @onchange = "LocalPaymentAmountChange('sales_Cheque3Amount')", @disabled = "disabled" })
                                </div>
                                @Html.ValidationMessageFor(s => sales.Cheque3Amount)
                            </div>
                        </div>
                        <div class="col-sm-6 col-sm-offset-6">
                            <div class="form-group">
                                @Html.DropDownListFor(s => sales.Cheque3Bank, (SelectList)ViewData["Cheque3BankDropdown"], new { @class = "form-control payment-mode-cheque-3", @data_plugin = "select2", @data_placeholder = "Cheque 3 Bank", @data_allow_clear = "true", @disabled = "disabled" })
                                @Html.ValidationMessageFor(s => sales.Cheque3Bank)
                            </div>
                        </div>

                        <div class="col-sm-3 col-sm-offset-3">
                            <span class="checkbox-custom checkbox-primary">
                                <input class="form-control" type="checkbox" id="bank-transfer" name="sales.LocalPaymentMode" value="Bank Transfer" onchange="LocalPaymentModeClick('bank-transfer', 'payment-mode-transfer')" @ViewData["LocalPaymentModeBankTransferCheckbox"].ToString() @localPaymentMode />
                                <label for="bank-transfer">Bank Transfer</label>
                            </span>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <div class="col-sm-10" style="padding-left: 0;padding-right: 5px; width:100%;" id="update-local-bank-transfer-input-div">@Html.TextBoxFor(s => sales.BankTransferNo, new { @class = "form-control payment-mode-transfer", @placeholder = "Bank Transfer No.", @disabled = "disabled" })</div>
                                <div style="display:none;" id="update-local-bank-transfer-div"><a id="update-local-bank-transfer-btn" class="btn btn-sm btn-icon btn-round btn-primary" href="javascript:void(0)" onclick="UpdateLocalBankTransfer()" style="text-decoration: none;" data-toggle="tooltip" data-original-title="Update Bank Transfer No."><i class="icon wb-edit" aria-hidden="true"></i></a></div>
                                @Html.ValidationMessageFor(s => sales.BankTransferNo)
                            </div>
                        </div>
                        <div class="col-sm-6 col-sm-offset-6">
                            <div class="form-group">
                                <div class="input-group">
                                    <span class="input-group-addon">SGD $</span>
                                    @Html.TextBoxFor(s => sales.BankTransferAmount, "{0:#,##0.00}", new { @class = "form-control payment-mode-transfer", @placeholder = "Bank Tranfer Amount", @onchange = "LocalPaymentAmountChange('sales_BankTransferAmount')", @disabled = "disabled" })
                                </div>
                                @Html.ValidationMessageFor(s => sales.BankTransferAmount)
                            </div>
                        </div>
                        <div class="col-sm-6 col-sm-offset-6">
                            <div class="form-group">
                                @Html.DropDownListFor(s => sales.BankTransferBank, (SelectList)ViewData["BankTransferBankDropdown"], new { @class = "form-control payment-mode-transfer", @data_plugin = "select2", @data_placeholder = "Bank Transfer Bank", @data_allow_clear = "true", @disabled = "disabled" })
                                @Html.ValidationMessageFor(s => sales.BankTransferBank)
                            </div>
                        </div>

                        @Html.LabelFor(s => sales.MemoBalance, new { @class = "col-sm-3 control-label" })
                        <div class="col-sm-9">
                            <div class="input-group">
                                <span class="input-group-addon">SGD $</span>
                                @Html.TextBoxFor(s => sales.MemoBalance, "{0:#,##0.00}", new { @class = "form-control payment-mode-memo-balance", @placeholder = "Memo Balance", @onchange = "AmountChange('sales_MemoBalance', true)", @disabled = "disabled" })
                            </div>
                            @Html.ValidationMessageFor(s => sales.MemoBalance)
                        </div>
                        <div class="col-sm-9 col-sm-offset-3">@Html.ValidationMessageFor(s => sales.LocalPaymentMode)</div>
                    </div>

                    <div class="form-group" id="page-buttons">
                        <div class="col-sm-12">
                            <button type="button" class="btn btn-primary margin-top-10" id="disable_button" onclick="disableButton()">Approve</button>
                            <button type="button" class="btn btn-danger margin-top-10" id="disable_button3" onclick="DisapproveSale(@sales.ID, '@sales.MemoID')">Reject</button>
                            <button type="submit" class="btn btn-primary margin-top-10" id="disable_button_saveChanges" onclick="disableButtonSaveChanges()">Save Changes</button>
                            <a href="@Url.Action("SaleApproval", new { @id = ViewData["SaleId"].ToString() })" class="btn btn-default btn-outline  margin-top-10" onclick="disableButton2()" id="disable_button2">Reset</a>
                            <a id="a-generate-memo" href="@Url.Action("GenerateMemo", new { @id = ViewData["SaleId"].ToString() })" class="btn btn-success margin-top-10">Generate Memo </a>
                            <a id="a-generate-sealing-cert" href="@Url.Action("GenerateSealingCert", new { @id = ViewData["SaleId"].ToString() })" class="btn btn-success margin-top-10">Generate Sealing Cert </a>
                            <button type="button" id="btn-send-receipt-email" class="btn btn-primary margin-top-10" onclick="SendEmail(@ViewData["SaleId"])">Send Receipt Email </button>
                            <button type="button" id="btn-send-confirmation-email" class="btn btn-warning margin-top-10" onclick="SendConfirmationEmail(@ViewData["SaleId"])">Send Confirmation Email </button>
                        </div>
                    </div>

                    <div class="modal fade" id="update-sale-modal" aria-hidden="false" aria-labelledby="update-sale-memoid"
                         role="dialog" tabindex="-1">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content form-horizontal">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">×</span>
                                    </button>
                                    <h4 class="modal-title" id="update-sale-memoid"></h4>
                                </div>
                                <div class="modal-body">

                                </div>
                            </div>
                        </div>
                    </div>
                }

                <div id="ApprovalHistoryBody">
                    <div class="panel">
                        <div class="panel-body container-fluid">
                            <div class="row margin-top-15">
                                <div><h2>Approval History</h2></div>
                                <div>Loading Data...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
		</div>
	</div>
</div>

<div class="modal fade" id="send-email-modal" aria-hidden="false" aria-labelledby="send-email-memoid"
	 role="dialog" tabindex="-1">
	<div class="modal-dialog modal-lg">
		<div class="modal-content form-horizontal">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
				<h4 class="modal-title" id="send-email-memoid"></h4>
			</div>
			<div class="modal-body">

			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="send-confirmation-email-modal" aria-hidden="false" aria-labelledby="send-confirmation-email-memoid"
	 role="dialog" tabindex="-1">
	<div class="modal-dialog modal-lg">
		<div class="modal-content form-horizontal">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
				<h4 class="modal-title" id="send-confirmation-email-memoid"></h4>
			</div>
			<div class="modal-body">

			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="cheque-modal" aria-hidden="false" aria-labelledby="modal-label"
	 role="dialog" tabindex="-1">
	<div class="modal-dialog modal-lg">
		<div class="modal-content form-horizontal">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
				<h4 class="modal-title" id="modal-label">New Cheque</h4>
			</div>
			<div class="modal-body"></div>
		</div>
	</div>
</div>

<div class="modal fade" id="bank-transfer-modal" aria-hidden="false" aria-labelledby="modal-label"
	 role="dialog" tabindex="-1">
	<div class="modal-dialog modal-lg">
		<div class="modal-content form-horizontal">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
				<h4 class="modal-title" id="modal-label">New Bank Transfer</h4>
			</div>
			<div class="modal-body"></div>
		</div>
	</div>
</div>

<div class="modal fade" id="cheque1No-modal" aria-hidden="false" aria-labelledby="modal-label"
	 role="dialog" tabindex="-1">
	<div class="modal-dialog modal-lg">
		<div class="modal-content form-horizontal">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
				<h4 class="modal-title" id="modal-label">New Cheque 1</h4>
			</div>
			<div class="modal-body">
				<div class="form-group row">
					<label for="staticCheque" class="col-sm-2 col-form-label">Cheque 1 No.:</label>
					<div class="col-sm-10">
						@Html.TextBox("LocalCheque1NoModel", null, new { @class = "form-control" })
						<span class="field-validation-error" id="LocalCheque1NoErrorMessage"></span>
					</div>
					<div style="float:right; padding-top: 20px; padding-right:15px;">
						<button class="btn btn-primary" onclick="btnLocalCheque1NoConfirm()">Confirm</button>
						<button class="btn btn-danger" onclick="btnLocalCheque1NoCancel()">Cancel</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="cheque2No-modal" aria-hidden="false" aria-labelledby="modal-label"
	 role="dialog" tabindex="-1">
	<div class="modal-dialog modal-lg">
		<div class="modal-content form-horizontal">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
				<h4 class="modal-title" id="modal-label">New Cheque 2</h4>
			</div>
			<div class="modal-body">
				<div class="form-group row">
					<label for="staticCheque" class="col-sm-2 col-form-label">Cheque 2 No.:</label>
					<div class="col-sm-10">
						@Html.TextBox("LocalCheque2NoModel", null, new { @class = "form-control" })
						<span class="field-validation-error" id="LocalCheque2NoErrorMessage"></span>
					</div>
					<div style="float:right; padding-top: 20px; padding-right:15px;">
						<button class="btn btn-primary" onclick="btnLocalCheque2NoConfirm()">Confirm</button>
						<button class="btn btn-danger" onclick="btnLocalCheque2NoCancel()">Cancel</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="cheque3No-modal" aria-hidden="false" aria-labelledby="modal-label"
	 role="dialog" tabindex="-1">
	<div class="modal-dialog modal-lg">
		<div class="modal-content form-horizontal">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
				<h4 class="modal-title" id="modal-label">New Cheque 3</h4>
			</div>
			<div class="modal-body">
				<div class="form-group row">
					<label for="staticCheque" class="col-sm-2 col-form-label">Cheque 3 No.:</label>
					<div class="col-sm-10">
						@Html.TextBox("LocalCheque3NoModel", null, new { @class = "form-control" })
						<span class="field-validation-error" id="LocalCheque3NoErrorMessage"></span>
					</div>
					<div style="float:right; padding-top: 20px; padding-right:15px;">
						<button class="btn btn-primary" onclick="btnLocalCheque3NoConfirm()">Confirm</button>
						<button class="btn btn-danger" onclick="btnLocalCheque3NoCancel()">Cancel</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="local-bank-transfer-modal" aria-hidden="false" aria-labelledby="modal-label"
	 role="dialog" tabindex="-1">
	<div class="modal-dialog modal-lg">
		<div class="modal-content form-horizontal">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
				<h4 class="modal-title" id="modal-label">New Local Bank Transfer No.</h4>
			</div>
			<div class="modal-body">
				<div class="form-group row">
					<label for="staticCheque" class="col-sm-2 col-form-label">Local Bank Transfer No.:</label>
					<div class="col-sm-10">
						@Html.TextBox("LocalBankTransferNoModel", null, new { @class = "form-control" })
						<span class="field-validation-error" id="LocalBankTransferNoErrorMessage"></span>
					</div>
					<div style="float:right; padding-top: 20px; padding-right:15px;">
						<button class="btn btn-primary" onclick="btnLocalBankTransferNoConfirm()">Confirm</button>
						<button class="btn btn-danger" onclick="btnLocalBankTransferNoCancel()">Cancel</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<link rel="stylesheet" href="@Url.Content("~/Content/vendor/bootstrap-datepicker/css/bootstrap-datepicker.css")">
<script src="@Url.Content("~/Content/vendor/bootstrap-datepicker/js/bootstrap-datepicker.js")"></script>

<script>
    $(document).ready(function () {
        $("#sales_CollectionDate").datepicker({
            autoclose: true,
            format: "dd/mm/yyyy DD"
        });

        $("a:disabled").on("click", function (e) {
            e.preventDefault();
        });

        var transaction = $("input[name='sales.TransactionType']:checked");
        if (transaction.length > 0) {
            transactionType = transaction[0].id;
        }

        TransactionTypeChange(transactionType);

        var status = $("#Status").val();

        if (status == "Pending Accounts" || status == "Pending Cashier") {
            LocalPaymentModeClick("cash", "payment-mode-cash");
            LocalPaymentModeClick("cheque-1", "payment-mode-cheque-1");
            LocalPaymentModeClick("cheque-2", "payment-mode-cheque-2");
            LocalPaymentModeClick("cheque-3", "payment-mode-cheque-3");
            LocalPaymentModeClick("bank-transfer", "payment-mode-transfer");
            $("#sales_MemoBalance").removeAttr("disabled");
        }

        var transactionCount = $("#table-transaction > tbody > tr").length;

        if (transactionCount > 0) {
            if ($("input[name='sales.TransactionType']:checked").val() == "Encashment" || $("input[name='sales.TransactionType']:checked").val() == "Deposit" || $("input[name='sales.TransactionType']:checked").val() == "Cross Currency") {
                $(".currency-dropdown").each(function () {
                    var id = this.id.split("_")[2];
                    FilterCurrency(id);
                });
            }

            HighlightPaired();
		}

		//Preload AuditLog Data.
		$("#ApprovalHistoryBody").load("@Url.Action("ViewApprovalHistory","Sale")?id=" + @ViewData["SaleId"].ToString());
    });

    //Delivery Confirmation Uploads
    $("#delivery-confirmation-uploader").on("change", function (e) {
        var $file = this,
        $formData = new FormData();
        if ($file.files.length > 0) {
            for (var i = 0; i < $file.files.length; i++) {
                $formData.append("file-" + i, $file.files[i]);
            }
        }
        $.ajax({
            url: "@Url.Action("FileUploader")",
            type: "POST",
            data: $formData,
            dataType: "json",
            contentType: false,
            processData: false,
            success: function ($data) {
                if ($data.result == "success") {
                    AppendDeliveryConfirmationFiles($data.msg);
                }
                else {
                    alertify.alert($data.msg);
                }
            },
            error: function (e) {
                alertify.alert("An error occured while uploading files!");
            }
        });
    });

    function AppendDeliveryConfirmationFiles(data) {
        var files = data.split(",");
        for (var i = 0; i < files.length; i++) {
            var $div = $("<div class='margin-top-10 small'></div>");
            //var $a = $("<a href='@Url.Content("~/FileUploads/Temp/")" + files[i] + "' target='_blank'>" + files[i] + "</a>");
            var $button = $("<button type='button' class='btn btn-pure btn-xs btn-danger icon wb-close' onclick='RemoveDeliveryConfirmationFile(this)'></button>");

			var $a = document.createElement('a');
			var linkText = document.createTextNode(files[i]);
			$a.appendChild(linkText);
			$a.title = files[i];
			$a.href = "@Url.Content("~/FileUploads/Temp/")" + files[i];
			$a.target = "_blank";
			document.body.appendChild($a);

            $("#delivery-confirmation-files").append($div.append($a).append($button));
        }
        var uploadedFiles = $("#sales_DeliveryConfirmation").val();
        if (uploadedFiles != "") {
            uploadedFiles += ",";
        }
        $("#sales_DeliveryConfirmation").val(uploadedFiles + data);
    }

    function RemoveDeliveryConfirmationFile($this) {
        var files = $("#sales_DeliveryConfirmation").val().split(",");
        var newFiles = "";
        for (var i = 0; i < files.length; i++) {
            if (files[i] != $this.previousSibling.innerHTML) {
                newFiles += files[i] + ",";
            }
        }
        newFiles = newFiles.slice(0, newFiles.length - 1);
        $("#sales_DeliveryConfirmation").val(newFiles);
        $this.parentNode.remove();
    }

    function TransactionTypeClick(type) {
        var transactionCount = $("#table-transaction > tbody > tr").length;
        if (transactionType != "" && transactionCount > 0) {
            if (type != transactionType) {
                alertify.confirm("<div style='margin-top: -15px;text-align: center;'>Are you sure you want to make changes to Transaction Type?<br/>This will remove all the transactions added.</div>", function (e) {
                    if (e) {
                        transactionType = type;
                        $("#table-transaction").html("");
                        TransactionTypeChange(type);
                    }
                    else {
                        $("#" + type).iCheck("uncheck");
                        $("#" + transactionType).iCheck("check");
                    }
                });
            }
        }
        else {
            transactionType = type;
            TransactionTypeChange(type);
        }
    }

    function TransactionTypeChange(type) {
		if (type == "Buy" || type == "Sell")
		{

			if (type == "Sell") {

				//Update the 3 field css
				//show the button div
				if ($("#cheque-1")[0].checked)
				{
					$("#update-chequeNo1-input-div").css('width', '90%');
					$("#sales_Cheque1No").attr('readonly', true);
					$("#sales_Cheque1No").removeAttr("disabled");
					$("#update-chequeNo1-input-div").css('padding-left', '0px');
					$("#update-chequeNo1-input-div").css('padding-right', '5px');
					$("#update-chequeNo1-div").show();
				}
				else
				{
					$("#update-chequeNo1-input-div").css('width', '100%');
					$("#sales_Cheque1No").attr("disabled", "disabled");
					$("#update-chequeNo1-div").hide();
					$("#update-chequeNo1-input-div").css('padding-left', '0px');
					$("#update-chequeNo1-input-div").css('padding-right', '0px');
				}

				if ($("#cheque-2")[0].checked)
				{
					$("#update-chequeNo2-input-div").css('width', '90%');
					$("#sales_Cheque2No").attr('readonly', true);
					$("#sales_Cheque2No").removeAttr("disabled");
					$("#update-chequeNo2-input-div").css('padding-left', '0px');
					$("#update-chequeNo2-input-div").css('padding-right', '5px');
					$("#update-chequeNo2-div").show();
				}
				else
				{
					$("#update-chequeNo2-input-div").css('width', '100%');
					$("#sales_Cheque2No").attr("disabled", "disabled");
					$("#update-chequeNo2-input-div").css('padding-left', '0px');
					$("#update-chequeNo2-input-div").css('padding-right', '0px');
					$("#update-chequeNo2-div").hide();
				}

				if ($("#cheque-3")[0].checked)
				{
					$("#update-chequeNo3-input-div").css('width', '90%');
					$("#sales_Cheque3No").attr('readonly', true);
					$("#sales_Cheque3No").removeAttr("disabled");
					$("#update-chequeNo3-input-div").css('padding-left', '0px');
					$("#update-chequeNo3-input-div").css('padding-right', '5px');
					$("#update-chequeNo3-div").show();
				}
				else
				{
					$("#update-chequeNo3-input-div").css('width', '100%');
					$("#sales_Cheque3No").attr("disabled", "disabled");
					$("#update-chequeNo3-input-div").css('padding-left', '0px');
					$("#update-chequeNo3-input-div").css('padding-right', '0px');
					$("#update-chequeNo3-div").hide();
				}

				if ($("#bank-transfer")[0].checked)
				{
					$("#update-local-bank-transfer-input-div").css('width', '90%');
					$("#sales_BankTransferNo").attr('readonly', true);
					$("#sales_BankTransferNo").removeAttr("disabled");
					$("#update-local-bank-transfer-input-div").css('padding-left', '0px');
					$("#update-local-bank-transfer-input-div").css('padding-right', '5px');
					$("#update-local-bank-transfer-div").show();
				}
				else
				{
					$("#update-local-bank-transfer-input-div").css('width', '100%');
					$("#sales_BankTransferNo").attr("disabled", "disabled");
					$("#update-local-bank-transfer-input-div").css('padding-left', '0px');
					$("#update-local-bank-transfer-input-div").css('padding-right', '0px');
					$("#update-local-bank-transfer-div").hide();
				}

			}
			else if(transactionType == "Buy")
			{
				//Update the 3 field css
				//show the button div
				//var checked = $("#" + id);
				$("#update-chequeNo1-input-div").css('padding-left', '0px');
				$("#update-chequeNo1-input-div").css('padding-right', '0px');
				$("#update-chequeNo2-input-div").css('padding-left', '0px');
				$("#update-chequeNo2-input-div").css('padding-right', '0px');
				$("#update-chequeNo3-input-div").css('padding-left', '0px');
				$("#update-chequeNo3-input-div").css('padding-right', '0px');
				$("#update-local-bank-transfer-input-div").css('padding-left', '0px');
				$("#update-local-bank-transfer-input-div").css('padding-right', '0px');
				$("#update-chequeNo1-input-div").css('width', '100%');
				$("#update-chequeNo2-input-div").css('width', '100%');
				$("#update-chequeNo3-input-div").css('width', '100%');
				$("#update-local-bank-transfer-input-div").css('width', '100%');
				if ($("#cheque-1")[0].checked)
				{
					$("#update-chequeNo1-input-div").css('width', '100%');
					$("#sales_Cheque1No").attr('readonly', false);
					$("#sales_Cheque1No").removeAttr("disabled");
					$("#update-chequeNo1-div").hide();
				}
				else
				{
					$("#update-chequeNo1-input-div").css('width', '100%');
					$("#sales_Cheque1No").attr("disabled", "disabled");
					$("#update-chequeNo1-div").hide();
				}

				if ($("#cheque-2")[0].checked)
				{
					$("#update-chequeNo2-input-div").css('width', '100%');
					$("#sales_Cheque2No").attr('readonly', false);
					$("#sales_Cheque2No").removeAttr("disabled");
					$("#update-chequeNo2-div").hide();
				}
				else
				{
					$("#update-chequeNo2-input-div").css('width', '100%');
					$("#sales_Cheque2No").attr("disabled", "disabled");
					$("#update-chequeNo2-div").hide();
				}

				if ($("#cheque-3")[0].checked)
				{
					$("#update-chequeNo3-input-div").css('width', '100%');
					$("#sales_Cheque3No").attr('readonly', false);
					$("#sales_Cheque3No").removeAttr("disabled");
					$("#update-chequeNo3-div").hide();
				}
				else
				{
					$("#update-chequeNo3-input-div").css('width', '100%');
					$("#sales_Cheque3No").attr("disabled", "disabled");
					$("#update-chequeNo3-div").hide();
				}

				if ($("#bank-transfer")[0].checked)
				{
					$("#update-local-bank-transfer-input-div").css('width', '100%');
					$("#sales_BankTransferNo").attr('readonly', false);
					$("#sales_BankTransferNo").removeAttr("disabled");
					$("#update-local-bank-transfer-div").hide();
				}
				else
				{
					$("#update-local-bank-transfer-input-div").css('width', '100%');
					$("#sales_BankTransferNo").attr("disabled", "disabled");
					$("#update-local-bank-transfer-div").hide();
				}
			}

            $("#local-payment-mode").fadeIn();
        }
        else {
            $("#local-payment-mode").fadeOut();
        }
    }

	function LocalPaymentModeClick(id, cls)
	{
        var checked = $("#" + id);
		if (checked[0].checked)
		{

			//check if is in sell mode
			var transactionType = $(".radio-transaction-type:checked").val();

			if (transactionType == "Sell") {
				//Update the 3 field css
				//show the button div

				if (cls == "payment-mode-cheque-1") {
					$("#update-chequeNo1-input-div").css('width', '90%');
					$("#sales_Cheque1No").attr('readonly', true);
					$("#sales_Cheque1No").removeAttr("disabled");
					$("#update-chequeNo1-input-div").css('padding-left', '0px');
					$("#update-chequeNo1-input-div").css('padding-right', '5px');
					$("#update-chequeNo1-div").show();
				}
				else if (cls == "payment-mode-cheque-2") {
					$("#update-chequeNo2-input-div").css('width', '90%');
					$("#sales_Cheque2No").attr('readonly', true);
					$("#sales_Cheque2No").removeAttr("disabled");
					$("#update-chequeNo2-input-div").css('padding-left', '0px');
					$("#update-chequeNo2-input-div").css('padding-right', '5px');
					$("#update-chequeNo2-div").show();
				}
				else if (cls == "payment-mode-cheque-3") {
					$("#update-chequeNo3-input-div").css('width', '90%');
					$("#sales_Cheque3No").attr('readonly', true);
					$("#sales_Cheque3No").removeAttr("disabled");
					$("#update-chequeNo3-input-div").css('padding-left', '0px');
					$("#update-chequeNo3-input-div").css('padding-right', '5px');
					$("#update-chequeNo3-div").show();
				}
				else if (cls == "payment-mode-transfer") {
					$("#update-local-bank-transfer-input-div").css('width', '90%');
					$("#sales_BankTransferNo").attr('readonly', true);
					$("#sales_BankTransferNo").removeAttr("disabled");
					$("#update-local-bank-transfer-input-div").css('padding-left', '0px');
					$("#update-local-bank-transfer-input-div").css('padding-right', '5px');
					$("#update-local-bank-transfer-div").show();
				}
			}
			else if(transactionType == "Buy")
			{
				//Update the 3 field css
				//show the button div

				$("#update-chequeNo1-input-div").css('padding-left', '0px');
				$("#update-chequeNo1-input-div").css('padding-right', '0px');
				$("#update-chequeNo2-input-div").css('padding-left', '0px');
				$("#update-chequeNo2-input-div").css('padding-right', '0px');
				$("#update-chequeNo3-input-div").css('padding-left', '0px');
				$("#update-chequeNo3-input-div").css('padding-right', '0px');
				$("#update-local-bank-transfer-input-div").css('padding-left', '0px');
				$("#update-local-bank-transfer-input-div").css('padding-right', '0px');
				$("#update-chequeNo1-input-div").css('width', '100%');
				$("#update-chequeNo2-input-div").css('width', '100%');
				$("#update-chequeNo3-input-div").css('width', '100%');
				$("#update-local-bank-transfer-input-div").css('width', '100%');

				if (cls == "payment-mode-cheque-1")
				{
					$("#update-chequeNo1-input-div").css('width', '100%');
					$("#sales_Cheque1No").attr('readonly', false);
					$("#sales_Cheque1No").removeAttr("disabled");
					$("#update-chequeNo1-div").hide();
				}
				else if (cls == "payment-mode-cheque-2") {
					$("#update-chequeNo2-input-div").css('width', '100%');
					$("#sales_Cheque2No").attr('readonly', false);
					$("#sales_Cheque2No").removeAttr("disabled");
					$("#update-chequeNo2-div").hide();
				}
				else if (cls == "payment-mode-cheque-3") {
					$("#update-chequeNo3-input-div").css('width', '100%');
					$("#sales_Cheque3No").attr('readonly', false);
					$("#sales_Cheque3No").removeAttr("disabled");
					$("#update-chequeNo3-div").hide();
				}
				else if (cls == "payment-mode-transfer") {
					$("#update-local-bank-transfer-input-div").css('width', '100%');
					$("#sales_BankTransferNo").attr('readonly', false);
					$("#sales_BankTransferNo").removeAttr("disabled");
					$("#update-local-bank-transfer-div").hide();
				}
			}

            $("input." + cls).removeAttr("disabled");
            if (cls != "payment-mode-cash") {
                $("select." + cls).removeAttr("disabled");
                $("select." + cls).select2();
            }
        }
		else
		{

				$("#update-chequeNo1-input-div").css('padding-left', '0px');
				$("#update-chequeNo1-input-div").css('padding-right', '0px');
				$("#update-chequeNo2-input-div").css('padding-left', '0px');
				$("#update-chequeNo2-input-div").css('padding-right', '0px');
				$("#update-chequeNo3-input-div").css('padding-left', '0px');
				$("#update-chequeNo3-input-div").css('padding-right', '0px');
				$("#update-local-bank-transfer-input-div").css('padding-left', '0px');
				$("#update-local-bank-transfer-input-div").css('padding-right', '0px');
				$("#update-chequeNo1-input-div").css('width', '100%');
				$("#update-chequeNo2-input-div").css('width', '100%');
				$("#update-chequeNo3-input-div").css('width', '100%');
				$("#update-local-bank-transfer-input-div").css('width', '100%');

			if (cls == "payment-mode-cheque-1")
				{
					$("#update-chequeNo1-input-div").css('width', '100%');
					$("#sales_Cheque1No").attr("disabled", "disabled");
					$("#update-chequeNo1-input-div").css('padding-left', '0px');
					$("#update-chequeNo1-input-div").css('padding-right', '0px');
					$("#update-chequeNo1-div").hide();
				}
				else if (cls == "payment-mode-cheque-2")
				{
					$("#update-chequeNo2-input-div").css('width', '100%');
					$("#sales_Cheque2No").attr("disabled", "disabled");
					$("#update-chequeNo2-input-div").css('padding-left', '0px');
					$("#update-chequeNo2-input-div").css('padding-right', '0px');
					$("#update-chequeNo2-div").hide();
				}
				else if (cls == "payment-mode-cheque-3")
				{
					$("#update-chequeNo3-input-div").css('width', '100%');
					$("#sales_Cheque3No").attr("disabled", "disabled");
					$("#update-chequeNo3-input-div").css('padding-left', '0px');
					$("#update-chequeNo3-input-div").css('padding-right', '0px');
					$("#update-chequeNo3-div").hide();
				}
				else if (cls == "payment-mode-transfer")
				{
					$("#update-local-bank-transfer-input-div").css('width', '100%');
					$("#sales_BankTransferNo").attr("disabled", "disabled");
					$("#update-local-bank-transfer-input-div").css('padding-left', '0px');
					$("#update-local-bank-transfer-input-div").css('padding-right', '0px');
					$("#update-local-bank-transfer-div").hide();
				}

            $("input." + cls).attr("disabled", "disabled");
            if (cls != "payment-mode-cash") {
                $("select." + cls).attr("disabled", "disabled");
                $("select." + cls).select2();
            }
        }

        CheckLocalPaymentMode();
    }

    function CheckLocalPaymentMode() {
        var checked = $("input[type=checkbox]:checked").length;

        if (checked >= 4) {
            $("input[type=checkbox]:not(:checked)").attr("disabled", "disabled");
        }
        else {
            $("input[type=checkbox]:disabled").removeAttr("disabled");
        }
    }

    function FilterCurrency(currentId) {
        var transaction = $("input[name='sales.TransactionType']:checked");
        if (transaction[0].value != "Deposit") {
            var pairedId = 0;
            if (parseInt(currentId) % 2 == 0) {
                pairedId = parseInt(currentId) - 1;
            }
            else {
                pairedId = parseInt(currentId) + 1;
            }
            var selectedVal = $("#Transaction_Currency_" + currentId).val();
            var pairedVal = $("#Transaction_Currency_" + pairedId).val();

            $("#Transaction_Currency_" + currentId + " option").each(function () {
                if (this.value == pairedVal) {
                    this.disabled = true;
                    this.hidden = true;
                    this.selected = false;
                }
                else {
                    if (this.value == selectedVal) {
                        this.disabled = false;
                        this.hidden = false;
                        this.selected = true;
                    }
                    else {
                        this.disabled = false;
                        this.hidden = false;
                        this.selected = false;
                    }
                }
            });

            $("#Transaction_Currency_" + pairedId + " option").each(function () {
                if (this.value == selectedVal) {
                    this.disabled = true;
                    this.hidden = true;
                    this.selected = false;
                }
                else {
                    if (this.value == pairedVal) {
                        this.disabled = false;
                        this.hidden = false;
                        this.selected = true;
                    }
                    else {
                        this.disabled = false;
                        this.hidden = false;
                        this.selected = false;
                    }
                }
            });
        }
    }

    function PaymentModeChange(rowId) {
        var mode = $("#Transaction_PaymentMode_" + rowId).val();
		if (mode == "Cheque")
		{

			//Enable Cheque Button.
			$("#update-cheque-btn-" + rowId).attr('onclick', 'UpdateCheque(' + rowId + ')');
			$("#update-cheque-btn-" + rowId).css('pointer-events', '');
			$("#Transaction_ChequeNo_" + rowId).attr('readonly', true);
			$("#Transaction_ChequeNo_" + rowId).removeAttr("disabled");

			//Disable Bank Transfer Button
			$("#update-bank-transfer-btn-" + rowId).prop("onclick", null);
			$("#update-bank-transfer-btn-" + rowId).css('pointer-events', 'none');
            $("#Transaction_BankTransferNo_" + rowId).attr("disabled", "disabled");
        }
		else if (mode == "Bank Transfer")
		{
			//Disable Cheque Button.
			$("#update-cheque-btn-" + rowId).prop("onclick", null);
			$("#update-cheque-btn-" + rowId).css('pointer-events', 'none');
			$("#Transaction_ChequeNo_" + rowId).attr("disabled", "disabled");

			//Enable Cheque Button.
			$("#update-bank-transfer-btn-" + rowId).attr('onclick', 'UpdateBankTransfer(' + rowId + ')');
			$("#update-bank-transfer-btn-" + rowId).css('pointer-events', '');
			$("#Transaction_BankTransferNo_" + rowId).attr('readonly', true);
            $("#Transaction_BankTransferNo_" + rowId).removeAttr("disabled");
        }
        else
		{
			//Disable Cheque Button.
			$("#update-cheque-btn-" + rowId).prop("onclick", null);
			$("#update-cheque-btn-" + rowId).css('pointer-events', 'none');
			$("#Transaction_ChequeNo_" + rowId).attr("disabled", "disabled");

			//Disable Bank Transfer Button
			$("#update-bank-transfer-btn-" + rowId).prop("onclick", null);
			$("#update-bank-transfer-btn-" + rowId).css('pointer-events', 'none');
            $("#Transaction_BankTransferNo_" + rowId).attr("disabled", "disabled");
        }
    }

    function OpenDenominationModal(rowId, type) {
        var denominationCount = $("#table-transaction-denomination-" + rowId + " tbody tr").length;

        if (denominationCount == 0) {
            var pid = $("#Transaction_Currency_" + rowId).val();
            var amountForeign = $("#Transaction_AmountForeign_" + rowId).val();
            var url = "@Url.Action("OpenDenomination")";

            $.ajax({
                type: "POST",
                cache: false,
                url: url,
                data: { pid: pid, rowId: rowId, amountForeign: amountForeign },
                success: function (data) {
                    data = JSON.parse(data);

                    if (data.Result) {
                        $("#modal-label-" + rowId).html(data.ModalTitle);
                        $("#AmtCurr-" + rowId)[0].innerHTML = data.ColumnName;
                        $("#table-transaction-denomination-" + rowId + " tbody").html(data.View);

                        $("#denomination-remaining-foreign-" + rowId).html(amountForeign);
                        $("#Denomination_Remaining_Foreign_" + rowId).val(amountForeign);

                        $("#denomination-total-order-foreign-" + rowId).html(amountForeign);
                        $("#Denomination_Total_Order_Foreign_" + rowId).val(amountForeign);

                        $("#modal-transaction-denomination-" + rowId).modal("show");
                    }
                    else {
                        alertify.alert(data.ErrorMessage);
                    }
                },
                error: function (e) {
                    console.log(e.status + " - " + e.statusText);
                    alertify.alert("An error occured while opening denomination modal!");
                }
            });
        }
        else {
            $("#modal-transaction-denomination-" + rowId).modal("show");
        }
    }

    function PiecesChange(rowId, rowId2) {
        var form = $("#table-transaction-denomination-" + rowId + " input, #table-transaction input#Transaction_Currency_" + rowId + ", #table-transaction input#Transaction_AmountForeign_" + rowId).serialize();
        var url = "@Url.Action("PiecesChange")?rowId=" + rowId + "&rowId2=" + rowId2;

        $.ajax({
            type: "POST",
            cache: false,
            url: url,
            data: form,
            success: function (data) {
                data = JSON.parse(data);

                if (data.Result) {
                    if (!data.IsValid) {
                        if (data.ModelErrors) {
                            var errors = "";
                            for (var i = 0; i < data.ModelErrors.length; i++) {
                                errors += data.ModelErrors[i][1] + "<br/>";
                            }

                            alertify.alert(errors);
                        }
                    }

                    $("#Denomination_Value_Pieces_" + rowId + "_" + rowId2).val(data.Pieces);
                    $("#denomination-amount-foreign-" + rowId + "-" + rowId2).html(data.DenoAmountForeign);
                    $("#Denomination_Value_AmountForeign_" + rowId + "_" + rowId2).val(data.DenoAmountForeign);

                    $("#denomination-total-calculated-foreign-" + rowId)[0].innerHTML = data.DenoTotalCalculated;
                    $("#Denomination_Total_Calculated_Foreign_" + rowId).val(data.DenoTotalCalculated);

                    $("#denomination-remaining-foreign-" + rowId)[0].innerHTML = data.DenoTotalRemaining;
                    $("#Denomination_Remaining_Foreign_" + rowId).val(data.DenoTotalRemaining);

                    $("#denomination-total-order-foreign-" + rowId)[0].innerHTML = data.DenoTotalOrder;
                    $("#Denomination_Total_Order_Foreign_" + rowId).val(data.DenoTotalOrder);
                }
                else {
                    alertify.alert(data.ErrorMessage);
                }
            },
            error: function (e) {
                console.log(e.status + " - " + e.statusText);
                alertify.alert("An error occured while validating pieces!");
            }
        });
    }

    function CoinsChange(rowId, rowId2) {
        var form = $("#table-transaction-denomination-" + rowId + " input, #table-transaction input#Transaction_Currency_" + rowId + ", #table-transaction input#Transaction_AmountForeign_" + rowId).serialize();
        var url = "@Url.Action("CoinsChange")?rowId=" + rowId + "&rowId2=" + rowId2;

        $.ajax({
            type: "POST",
            cache: false,
            url: url,
            data: form,
            success: function (data) {
                data = JSON.parse(data);

                if (data.Result) {
                    if (!data.IsValid) {
                        if (data.ModelErrors) {
                            var errors = "";
                            for (var i = 0; i < data.ModelErrors.length; i++) {
                                errors += data.ModelErrors[i][1] + "<br/>";
                            }

                            alertify.alert(errors);
                        }
                    }

                    $("#Denomination_Value_AmountForeign_" + rowId + "_" + rowId2).val(data.DenoAmountForeign);

                    $("#denomination-total-calculated-foreign-" + rowId)[0].innerHTML = data.DenoTotalCalculated;
                    $("#Denomination_Total_Calculated_Foreign_" + rowId).val(data.DenoTotalCalculated);

                    $("#denomination-remaining-foreign-" + rowId)[0].innerHTML = data.DenoTotalRemaining;
                    $("#Denomination_Remaining_Foreign_" + rowId).val(data.DenoTotalRemaining);

                    $("#denomination-total-order-foreign-" + rowId)[0].innerHTML = data.DenoTotalOrder;
                    $("#Denomination_Total_Order_Foreign_" + rowId).val(data.DenoTotalOrder);
                }
                else {
                    alertify.alert(data.ErrorMessage);
                }
            },
            error: function (e) {
                console.log(e.status + " - " + e.statusText);
                alertify.alert("An error occured while validating coins!");
            }
        });
    }

    function RemoveDenomination(rowId) {
        $("#table-transaction-denomination-" + rowId + " tbody").html("");

        $("#denomination-total-calculated-foreign-" + rowId)[0].innerHTML = "0.00";
        $("#Denomination_Total_Calculated_Foreign_" + rowId).val("0.00");

        $("#modal-transaction-denomination-" + rowId).modal("hide");
    }

    function RemoveTransaction(rowId) {
        $("#transaction-row-" + rowId).remove();

        var transactionCount = $("#table-transaction > tbody > tr").length;

        if (transactionCount == 0) {
            $("#table-transaction").html("");
        }
        else {
            var type = $("input[name='sales.TransactionType']:checked")[0].id;
            var form = $("#table-transaction input, #table-transaction select").serialize();
            var url = "@Url.Action("RemoveTransaction")?type=" + type;

            $.ajax({
                type: "POST",
                cache: false,
                url: url,
                data: form,
                success: function (data) {
                    data = JSON.parse(data);

                    if (data.Result) {
                        $("#total-amount-foreign").html("$" + data.TotalAmountForeign);
                        $("#total-amount-local").html("$" + data.TotalAmountLocal);

                        SetLocalPaymentModeAmount(data.TotalAmountLocal);
                    }
                    else {
                        alertify.alert(data.ErrorMessage);
                    }
                },
                error: function (e) {
                    console.log(e.status + " - " + e.statusText);
                    alertify.alert("An error occured while removing transaction!");
                }
            });
        }
    }

    function RemovePairedTransaction(pairedId) {
        $("#table-transaction > tbody > tr.paired-row-" + pairedId).remove();

        var transactionCount = $("#table-transaction > tbody > tr").length;

        if (transactionCount == 0) {
            $("#table-transaction").html("");
        }
        else {
            var type = $("input[name='sales.TransactionType']:checked")[0].id;
            var form = $("#table-transaction input, #table-transaction select").serialize();
            var url = "@Url.Action("RemoveTransaction")?type=" + type;

            $.ajax({
                type: "POST",
                cache: false,
                url: url,
                data: form,
                success: function (data) {
                    data = JSON.parse(data);

                    if (data.Result) {
                        $("#total-amount-foreign").html("$" + data.TotalAmountForeign);
                        $("#total-amount-local").html("$" + data.TotalAmountLocal);
                    }
                    else {
                        alertify.alert(data.ErrorMessage);
                    }
                },
                error: function (e) {
                    console.log(e.status + " - " + e.statusText);
                    alertify.alert("An error occured while removing transaction!");
                }
            });
        }

        HighlightPaired();
    }

    function HighlightPaired() {
        var pairedCls = [];
        var row = $("#table-transaction > tbody > tr[class^=paired-row]");
        row.each(function () {
            if ($.inArray(this.classList[0], pairedCls) == -1) {
                pairedCls.push(this.classList[0]);
            }
        });

        var highlightCls = "bg-grey-200";
        for (var i = 0; i < pairedCls.length; i++) {
            if (i % 2 == 0) {
                if (!$("tr." + pairedCls[i]).hasClass(highlightCls)) {
                    $("tr." + pairedCls[i]).addClass(highlightCls);
                }
            }
            else {
                if ($("tr." + pairedCls[i]).hasClass(highlightCls)) {
                    $("tr." + pairedCls[i]).removeClass(highlightCls);
                }
            }
        }
    }

    function SendEmail(id) {
        var url = "@Url.Action("SendEmail")";

        $("#disable_button").attr("disabled", true);
        $("#disable_button3").attr("disabled", true);
        $('#btn-send-receipt-email').attr("disabled", true);
        $('#btn-send-confirmation-email').attr("disabled", true);
        $('#a-generate-memo').attr("disabled", true);
        $('#a-generate-sealing-cert').attr("disabled", true);
        $("#disable_button2").addClass("non-active");
        $("#a-generate-memo").addClass("non-active");
        $("#a-generate-sealing-cert").addClass("non-active");
        $("#btn-send-confirmation-email").addClass( "non-active" );

        $.ajax({
            type: "GET",
            url: url,
            data: { id: id },
            success: function (data) {
                $("#send-email-modal .modal-body").html(data);
                $("#send-email-modal").modal("show");

                $("#disable_button").attr("disabled", false);
                $("#disable_button3").attr("disabled", false);
                $('#btn-send-receipt-email').attr("disabled", false);
                $('#btn-send-confirmation-email').attr("disabled", false);
                $('#a-generate-memo').attr("disabled", false);
                $('#a-generate-sealing-cert').attr("disabled", false);
                $("#disable_button2").removeClass("non-active");
                $("#a-generate-memo").removeClass("non-active");
                $("#a-generate-sealing-cert").removeClass("non-active");
                $("#btn-send-confirmation-email").removeClass( "non-active" );
            }
        });
    }

    function SendConfirmationEmail(id) {
        alertify.alert("TDS not yet receive Confirmation Email Template!");
    }

    function SubmitEmail(id, formId) {
        var subject = $("#Subject").val();
        if (subject == "") {
            alertify.confirm("Are you sure you want to send this email without any subject?", function (e) {
                if (e) {

                    SubmitEmailForm(id, formId);
                }
            });
        }
        else {
            SubmitEmailForm(id, formId);
        }
    }

    function SubmitEmailForm(id, formId) {
        $("#btn-send-email").attr("disabled", "disabled");
        var interval = setInterval(function () {
            setTimeout(function () {
                $("#btn-send-email").html("Sending.");
            }, 500);
            setTimeout(function () {
                $("#btn-send-email").html("Sending..");
            }, 1000);
            setTimeout(function () {
                $("#btn-send-email").html("Sending...");
            }, 1500);
        }, 1500);
        var url = $("#" + formId)[0].action;
        var form = $("#" + formId).serialize();

        $.ajax({
            type: "POST",
            url: url,
            data: form,
            success: function (data) {
                data = JSON.parse(data);
                if (data.result == "success") {
                    $("#send-email-modal").modal("hide");
                    alertify.success(data.msg);
                }
                else if (data.result == "form-error") {
                    $("span.field-validation-valid").each(function () {
                        this.innerHTML = "";
                    });

                    for (var i = 0; i < data.msg.length; i++) {
                        $("span.field-validation-valid[data-valmsg-for=" + data.msg[i].id + "]")[0].innerHTML = data.msg[i].error;
                    }
                    alertify.alert("There is something wrong in the form!");
                }
                else {
                    alertify.alert(data.msg);
                }
                $("#btn-send-email").removeAttr("disabled");
                clearInterval(interval);
            }
        });
    }

    function SendConfirmationEmail(id) {
        var url = "@Url.Action("SendConfirmationEmail")";

        $("#disable_button").attr("disabled", true);
        $("#disable_button3").attr("disabled", true);
        $('#btn-send-receipt-email').attr("disabled", true);
        $('#btn-send-confirmation-email').attr("disabled", true);
        $('#a-generate-memo').attr("disabled", true);
        $('#a-generate-sealing-cert').attr("disabled", true);
        $("#disable_button2").attr("disabled", true);

        $("#disable_button2").addClass("non-active");
        $("#a-generate-memo").addClass("non-active");
        $("#a-generate-sealing-cert").addClass("non-active");
        $("#btn-send-confirmation-email").addClass( "non-active" );

        $.ajax({
            type: "GET",
            url: url,
            data: { id: id },
            success: function (data) {
                $("#send-confirmation-email-modal .modal-body").html(data);
                $("#send-confirmation-email-modal").modal("show");

                $("#disable_button").attr("disabled", false);
                $("#disable_button3").attr("disabled", false);
                $('#btn-send-receipt-email').attr("disabled", false);
                $('#btn-send-confirmation-email').attr("disabled", false);
                $('#a-generate-memo').attr("disabled", false);
                $('#a-generate-sealing-cert').attr("disabled", false);
                $("#disable_button2").attr("disabled", false);

                $("#disable_button2").removeClass("non-active");
                $("#a-generate-memo").removeClass("non-active");
                $("#a-generate-sealing-cert").removeClass("non-active");
                $("#btn-send-confirmation-email").removeClass( "non-active" );
            }
        });

        //$("#disable_button").attr("disabled", false);
        //$("#disable_button3").attr("disabled", false);
        //        $('#btn-send-receipt-email').attr("disabled", false);
        //        $('#btn-send-confirmation-email').attr("disabled", false);
        //        $("#disable_button2").removeClass("non-active");
        //        $("#a-generate-memo").removeClass("non-active");
        //        $("#a-generate-sealing-cert").removeClass("non-active");
        //        $("#btn-send-confirmation-email").removeClass( "non-active" );
    }

    function SubmitConfirmationEmail(id, formId) {
        var subject = $("#ConfirmationSubject").val();
        if (subject == "") {
            alertify.confirm("Are you sure you want to send this email without any subject?", function (e) {
                if (e) {
                    SubmitConfirmationEmailForm(id, formId);
                }
            });
        }
        else {
            SubmitConfirmationEmailForm(id, formId);
        }
    }

    function SubmitConfirmationEmailForm(id, formId) {
        $("#btn-send-email-confirmation").attr("disabled", "disabled");
        var interval = setInterval(function () {
            setTimeout(function () {
                $("#btn-send-email-confirmation").html("Sending.");
            }, 500);
            setTimeout(function () {
                $("#btn-send-email-confirmation").html("Sending..");
            }, 1000);
            setTimeout(function () {
                $("#btn-send-email-confirmation").html("Sending...");
            }, 1500);
        }, 1500);
        var url = $("#" + formId)[0].action;
        var form = $("#" + formId).serialize();
        $.ajax({
            type: "POST",
            url: url,
            data: form,
            success: function (data) {
                data = JSON.parse(data);
                if (data.result == "success") {
                    $("#send-confirmation-email-modal").modal("hide");
                    alertify.success(data.msg);
                }
                else if (data.result == "form-error") {
                    $("span.field-validation-valid").each(function () {
                        this.innerHTML = "";
                    });

                    for (var i = 0; i < data.msg.length; i++) {
                        $("span.field-validation-valid[data-valmsg-for=" + data.msg[i].id + "]")[0].innerHTML = data.msg[i].error;
                    }
                    alertify.alert("There is something wrong in the form!");
                }
                else {
                    alertify.alert(data.msg);
                }
                $("#btn-send-email-confirmation").removeAttr("disabled");
                clearInterval(interval);
            }
        });
    }

    function DisapproveSale(id, memoID) {

                $("#disable_button").attr("disabled", true);
                $("#disable_button3").attr("disabled", true);
                $('#btn-send-receipt-email').attr("disabled", true);
                $('#btn-send-confirmation-email').attr("disabled", true);
                $('#a-generate-memo').attr("disabled", true);
                $('#a-generate-sealing-cert').attr("disabled", true);
                $("#disable_button2").attr("disabled", true);

                $("#disable_button2").addClass("non-active");
                $("#a-generate-memo").addClass("non-active");
                $("#a-generate-sealing-cert").addClass("non-active");
                $("#btn-send-confirmation-email").addClass("non-active");

        alertify.confirm("Are you sure you want to disapprove " + memoID + "?", function (e) {
			if (e) {
				var url = "@Url.Action("DisapproveSale", "TaskList")";

				$.ajax({
					type: "GET",
					url: url,
					data: { id: id },
					success: function (data) {
						if (data.indexOf('"result":"error"') == -1) {
							$("#disable_button").attr("disabled", false);
							$("#disable_button3").attr("disabled", false);
							$('#btn-send-receipt-email').attr("disabled", false);
							$('#btn-send-confirmation-email').attr("disabled", false);
							$('#a-generate-memo').attr("disabled", false);
							$('#a-generate-sealing-cert').attr("disabled", false);
							$("#disable_button2").attr("disabled", false);

							$("#disable_button2").removeClass("non-active");
							$("#a-generate-memo").removeClass("non-active");
							$("#a-generate-sealing-cert").removeClass("non-active");
							$("#btn-send-confirmation-email").removeClass("non-active");

							$("#update-sale-modal .modal-body").html(data);
							$("#update-sale-modal").modal("show");
						}
						else {
							var url = "@Url.Action("Listing", @ViewData["Module"].ToString())";
							window.location.href = url;
						}
					}
				});

				$("#disable_button").attr("disabled", false);
				$("#disable_button3").attr("disabled", false);
				$('#btn-send-receipt-email').attr("disabled", false);
				$('#btn-send-confirmation-email').attr("disabled", false);
				$('#a-generate-memo').attr("disabled", false);
				$('#a-generate-sealing-cert').attr("disabled", false);

				$("#disable_button2").removeClass("non-active");
				$("#a-generate-memo").removeClass("non-active");
				$("#a-generate-sealing-cert").removeClass("non-active");
				$("#btn-send-confirmation-email").removeClass("non-active");
			}
			else {
				$("#disable_button").attr("disabled", false);
				$("#disable_button3").attr("disabled", false);
				$('#btn-send-receipt-email').attr("disabled", false);
				$('#btn-send-confirmation-email').attr("disabled", false);
				$('#a-generate-memo').attr("disabled", false);
				$('#a-generate-sealing-cert').attr("disabled", false);

				$("#disable_button2").removeClass("non-active");
				$("#a-generate-memo").removeClass("non-active");
				$("#a-generate-sealing-cert").removeClass("non-active");
				$("#btn-send-confirmation-email").removeClass("non-active");
			}
        });
    }

    function LocalPaymentAmountChange(id) {
        var amount = $("#" + id).val();
        var url = "@Url.Action("ValidateAmount")";

        $.ajax({
            type: "POST",
            cache: false,
            url: url,
            data: { amount: amount },
            success: function (data) {
                data = JSON.parse(data);
                if (data.Result) {
                    $("#" + id).val(data.Amount);
                }
                else {
                    alertify.alert(data.ErrorMessage);
                }
            },
            error: function (e) {
                console.log(e.status + " - " + e.statusText);
                alertify.alert("An error occured while validating amount!");
            }
        });
    }

    function SubmitForm(id) {
        var url = $("#" + id)[0].action;
        var form = $("#" + id).serialize();

        $.ajax({
            type: "POST",
            url: url,
            data: form,
            success: function (data) {
                data = JSON.parse(data);
                if (data.result == "success") {
                    $("#update-sale-modal").modal("hide");
                    window.location.href = "@Url.Action("Listing", @ViewData["Module"].ToString())";
                }
                else if (data.result == "form-error") {
                    $("span.field-validation-valid").each(function () {
                        this.innerHTML = "";
                    });

                    for (var i = 0; i < data.msg.length; i++) {
                        $("span.field-validation-valid[data-valmsg-for=" + data.msg[i].id + "]")[0].innerHTML = data.msg[i].error;
                    }
                    alertify.alert("There is something wrong in the form!");
                }
                else {
                    alertify.alert(data.msg);
                }
            }
        })
    }

    function AmountChange(id, n) {
        var url = "@Url.Action("ValidateAmount2")";
        var amount = $("#" + id).val();

        $.ajax({
            type: "POST",
            cache: false,
            url: url,
            data: { amount: amount, allowedNegative: n },
            success: function (data) {
                data = JSON.parse(data);

                if (data.Result) {
                    $("#" + id).val(data.Amount);
                }
                else {
                    alertify.alert(data.ErrorMessage);
                }
            },
            error: function (e) {
                console.log(e);
                alertify.alert("An error occured while validating amount!");
            }
        });
    }

    function disableButton()
    {
        $("#disable_button").attr("disabled", true);
        $("#disable_button3").attr("disabled", true);
        $('#btn-send-receipt-email').attr("disabled", true);
        $('#btn-send-confirmation-email').attr("disabled", true);
        $('#a-generate-memo').attr("disabled", true);
        $('#a-generate-sealing-cert').attr("disabled", true);
        $("#disable_button2").attr("disabled", true);

        $("#disable_button2").addClass("non-active");
        $("#a-generate-memo").addClass("non-active");
        $("#a-generate-sealing-cert").addClass("non-active");
        $("#btn-send-confirmation-email").addClass( "non-active" );
        $("#form-edit").submit();
    }

 //   function disableButton2()
 //   {

 //       $("#disable_button").attr("disabled", true);
 //       $("#disable_button3").attr("disabled", true);
 //       $('#btn-send-receipt-email').attr("disabled", true);
 //       $('#btn-send-confirmation-email').attr("disabled", true);
 //       $("#disable_button2").addClass("non-active");
 //       $("#a-generate-memo").addClass("non-active");
 //       $("#a-generate-sealing-cert").addClass("non-active");
 //       $("#btn-send-confirmation-email").addClass("non-active");

 //       $(document).ready(function ()
 //       {
 //               $("#disable_button").attr("disabled", false);
 //               $("#disable_button3").attr("disabled", false);
 //               $('#btn-send-receipt-email').attr("disabled", false);
 //               $('#btn-send-confirmation-email').attr("disabled", false);
 //               $("#disable_button2").removeClass("non-active");
 //               $("#a-generate-memo").removeClass("non-active");
 //               $("#a-generate-sealing-cert").removeClass("non-active");
 //               $("#btn-send-confirmation-email").removeClass( "non-active" );
 //       });
	//}

    function disableButton2()
    {
        $("#disable_button").attr("disabled", true);
        $("#disable_button3").attr("disabled", true);
        $('#btn-send-receipt-email').attr("disabled", true);
        $('#btn-send-confirmation-email').attr("disabled", true);
        $("#disable_button2").attr("disabled", true);
        $("#a-generate-memo").attr("disabled", true);
        $("#a-generate-sealing-cert").attr("disabled", true);
        $("#btn-send-confirmation-email").attr("disabled", true);


        //$("#disable_button2").removeAttr("href");
        //$("#disable_button4").removeAttr("href");
        $("#disable_button2").attr("href", "javascript:void(0)");
        $("#a-generate-memo").attr("href", "javascript:void(0)");
        $("#a-generate-sealing-cert").attr("href", "javascript:void(0)");

        $('#disable_button2').prop('onclick',null).off('click');
        $('#a-generate-memo').prop('onclick',null).off('click');
        $('#a-generate-sealing-cert').prop('onclick',null).off('click');


        window.location.href = '@Url.Action("SaleApproval", new { @id = ViewData["SaleId"].ToString() })';
	}

	function disableButtonSaveChanges()
    {
        $("#disable_button").attr("disabled", true);
        $("#disable_button2").attr("disabled", true);
		$("#disable_button3").attr("disabled", true);
		$("#disable_button_saveChanges").attr("disabled", true);
        $('#btn-send-receipt-email').attr("disabled", true);
        $('#btn-send-confirmation-email').attr("disabled", true);
		$('#a-generate-memo').attr("disabled", true);
		$('#a-generate-confirmation').attr("disabled", true);
        $('#a-generate-sealing-cert').attr("disabled", true);

        $("#disable_button3").attr("href", "javascript:void(0)");
		$("#a-generate-memo").attr("href", "javascript:void(0)");
		$("#a-generate-confirmation").attr("href", "javascript:void(0)");
        $("#a-generate-sealing-cert").attr("href", "javascript:void(0)");

		$("#disable_button_saveChanges").prop('onclick',null).off('click');
        $('#disable_button3').prop('onclick',null).off('click');
		$('#a-generate-memo').prop('onclick', null).off('click');
		$('#a-generate-confirmation').prop('onclick',null).off('click');
        $('#a-generate-sealing-cert').prop('onclick',null).off('click');

		var input = $("<input>").attr("type", "hidden").attr("name", "submitType").val("SaveChanges");
		$('#form-edit').append(input);
        $("#form-edit").submit();
    }

	//Update Cheque Model
	function UpdateCheque(id)
	{
		//console.log("Update Cheque with ID " + id);
        var url = "@Url.Action("AddChequeModel")";
        $.ajax({
			type: "GET",
			beforeSend: function() {
				 $(".preload").show();
			},
            url: url,
            data: { id: id },
			success: function (data)
			{
                $("#cheque-modal .modal-body").html(data);
				$("#cheque-modal").modal("show");
				$(".preload").hide();
			},
			error: function (e)
			{
                console.log(e.status + " - " + e.statusText);
                $(".preload").hide();
            }
        });
	}

	//Update Bank Transfer Model
	function UpdateBankTransfer(id)
	{
		//console.log("Update Bank Transfer with ID " + id);
        var url = "@Url.Action("AddBankTransferModel")";
        $.ajax({
			type: "GET",
			beforeSend: function() {
				 $(".preload").show();
			},
            url: url,
            data: { id: id },
			success: function (data)
			{
                $("#bank-transfer-modal .modal-body").html(data);
				$("#bank-transfer-modal").modal("show");
				$(".preload").hide();
			},
			error: function (e)
			{
                console.log(e.status + " - " + e.statusText);
                $(".preload").hide();
            }
        });
	}

	function btnChequeConfirm(id)
	{
		//hide modal
		var getChequeModalValue = document.getElementById("Transaction_ChequeNoModel_" + id).value;//by id

		if (getChequeModalValue === "")
		{
			//prompt error
			document.getElementById("ChequeErrorMessage_"+ id).textContent = "Cheque No. is required!";
		}
		else
		{
			//update value and append into the div
			//Transaction_ChequeNo_
			$("#Transaction_ChequeNo_" + id).val(getChequeModalValue);
			$("#cheque-modal").modal("hide");
			$("#PendingChequeLog").val(1);
		}

	}

	function btnChequeCancel()
	{
		//hide modal
		$("#cheque-modal").modal("hide");
	}

	function btnBankTransferConfirm(id)
	{
		//hide modal
		var getBankTransferModalValue = document.getElementById("Transaction_BankTransferNoModel_" + id).value;//by id

		if (getBankTransferModalValue === "")
		{
			//prompt error
			document.getElementById("BankTransferErrorMessage_"+ id).textContent = "Bank Transfer No. is required!";
		}
		else
		{
			//update value and append into the div
			//Transaction_BankTransferNo_
			$("#Transaction_BankTransferNo_" + id).val(getBankTransferModalValue);
			$("#bank-transfer-modal").modal("hide");
			$("#PendingBankTransferLog").val(1);
		}

	}

	function btnBankTransferCancel()
	{
		//hide modal
		$("#bank-transfer-modal").modal("hide");
	}

	//Update Cheque 1 No Model
	function UpdateCheque1No()
	{
        $("#cheque1No-modal").modal("show");
	}

	//Update Cheque 2 No Model
	function UpdateCheque2No()
	{
        $("#cheque2No-modal").modal("show");
	}

	//Update Cheque 3 No Model
	function UpdateCheque3No()
	{
        $("#cheque3No-modal").modal("show");
	}

	//Update Local Bank Transfer Model
	function UpdateLocalBankTransfer()
	{
        $("#local-bank-transfer-modal").modal("show");
	}

	function btnLocalCheque1NoConfirm()
	{
		//hide modal
		var getCheque1NoModalValue = document.getElementById("LocalCheque1NoModel").value;//by id

		if (getCheque1NoModalValue === "")
		{
			//prompt error
			document.getElementById("LocalCheque1NoErrorMessage").textContent = "Cheque 1 No. is required!";
		}
		else
		{
			//update value and append into the div
			//Transaction_ChequeNo_
			$("#sales_Cheque1No").val(getCheque1NoModalValue);
			$("#cheque1No-modal").modal("hide");
			$("#PendingLocalCheque1Log").val(1);
		}
		
	}

	function btnLocalCheque1NoCancel()
	{
		//hide modal
		$("#cheque1No-modal").modal("hide");
	}

	function btnLocalCheque2NoConfirm()
	{
		//hide modal
		var getCheque2NoModalValue = document.getElementById("LocalCheque2NoModel").value;//by id

		if (getCheque2NoModalValue === "")
		{
			//prompt error
			document.getElementById("LocalCheque2NoErrorMessage").textContent = "Cheque 2 No. is required!";
		}
		else
		{
			//update value and append into the div
			//Transaction_ChequeNo_
			$("#sales_Cheque2No").val(getCheque2NoModalValue);
			$("#cheque2No-modal").modal("hide");
			$("#PendingLocalCheque2Log").val(1);
		}
		
	}

	function btnLocalCheque2NoCancel()
	{
		//hide modal
		$("#cheque2No-modal").modal("hide");
	}

	function btnLocalCheque3NoConfirm()
	{
		//hide modal
		var getCheque3NoModalValue = document.getElementById("LocalCheque3NoModel").value;//by id

		if (getCheque3NoModalValue === "")
		{
			//prompt error
			document.getElementById("LocalCheque3NoErrorMessage").textContent = "Cheque 3 No. is required!";
		}
		else
		{
			//update value and append into the div
			//Transaction_ChequeNo_
			$("#sales_Cheque3No").val(getCheque3NoModalValue);
			$("#cheque3No-modal").modal("hide");
			$("#PendingLocalCheque3Log").val(1);
		}
		
	}

	function btnLocalCheque3NoCancel()
	{
		//hide modal
		$("#cheque3No-modal").modal("hide");
	}

	function btnLocalBankTransferNoConfirm()
	{
		//hide modal
		var getLocalBankTransferModalValue = document.getElementById("LocalBankTransferNoModel").value;//by id

		if (getLocalBankTransferModalValue === "")
		{
			//prompt error
			document.getElementById("LocalBankTransferNoErrorMessage").textContent = "Bank Transfer No. is required!";
		}
		else
		{
			//update value and append into the div
			//Transaction_ChequeNo_
			$("#sales_BankTransferNo").val(getLocalBankTransferModalValue);
			$("#local-bank-transfer-modal").modal("hide");
			$("#PendingLocalBankTransferLog").val(1);
		}
	}

	function btnLocalBankTransferNoCancel()
	{
		//hide modal
		$("#local-bank-transfer-modal").modal("hide");
	}

	$(window).resize(function ()
	{
		if (window.innerWidth > 920)
		{
			if (transactionType == "Sell")
			{

				//Update the 3 field css
				//show the button div
				if ($("#cheque-1")[0].checked)
				{
					$("#update-chequeNo1-input-div").css('width', '90%');
					$("#update-chequeNo1-input-div").css('padding-left', '0px');
					$("#update-chequeNo1-input-div").css('padding-right', '5px');
				}
				else
				{
					$("#update-chequeNo1-input-div").css('width', '100%');
					$("#update-chequeNo1-input-div").css('padding-left', '0px');
					$("#update-chequeNo1-input-div").css('padding-right', '0px');
					$(".payment-mode-cheque-1").css('width', '100%');
				}

				if ($("#cheque-2")[0].checked)
				{
					$("#update-chequeNo2-input-div").css('width', '90%');
					$("#update-chequeNo2-input-div").css('padding-left', '0px');
					$("#update-chequeNo2-input-div").css('padding-right', '5px');
				}
				else
				{
					$("#update-chequeNo2-input-div").css('width', '100%');
					$("#update-chequeNo2-input-div").css('padding-left', '0px');
					$("#update-chequeNo2-input-div").css('padding-right', '0px');
				}

				if ($("#cheque-3")[0].checked)
				{
					$("#update-chequeNo3-input-div").css('width', '90%');
					$("#update-chequeNo3-input-div").css('padding-left', '0px');
					$("#update-chequeNo3-input-div").css('padding-right', '5px');
				}
				else
				{
					$("#update-chequeNo3-input-div").css('width', '100%');
					$("#update-chequeNo3-input-div").css('padding-left', '0px');
					$("#update-chequeNo3-input-div").css('padding-right', '0px');
				}

				if ($("#bank-transfer")[0].checked)
				{
					$("#update-local-bank-transfer-input-div").css('width', '90%');
					$("#sales_BankTransferNo").attr('readonly', true);
					$("#sales_BankTransferNo").removeAttr("disabled");
					$("#update-local-bank-transfer-input-div").css('padding-left', '0px');
					$("#update-local-bank-transfer-input-div").css('padding-right', '5px');
					$("#update-local-bank-transfer-div").show();
				}
				else
				{
					$("#update-local-bank-transfer-input-div").css('width', '100%');
					$("#sales_BankTransferNo").attr("disabled", "disabled");
					$("#update-local-bank-transfer-input-div").css('padding-left', '0px');
					$("#update-local-bank-transfer-input-div").css('padding-right', '0px');
					$("#update-local-bank-transfer-div").hide();
				}

			}
			else if(transactionType == "Buy")
			{
				//Update the 3 field css
				//show the button div
				//var checked = $("#" + id);
				$("#update-chequeNo1-input-div").css('padding-left', '0px');
				$("#update-chequeNo1-input-div").css('padding-right', '0px');
				$("#update-chequeNo2-input-div").css('padding-left', '0px');
				$("#update-chequeNo2-input-div").css('padding-right', '0px');
				$("#update-chequeNo3-input-div").css('padding-left', '0px');
				$("#update-chequeNo3-input-div").css('padding-right', '0px');
				$("#update-local-bank-transfer-input-div").css('padding-left', '0px');
				$("#update-local-bank-transfer-input-div").css('padding-right', '0px');
				$("#update-chequeNo1-input-div").css('width', '100%');
				$("#update-chequeNo2-input-div").css('width', '100%');
				$("#update-chequeNo3-input-div").css('width', '100%');
				$("#update-local-bank-transfer-input-div").css('width', '100%');
			}
		}
		else if (window.innerWidth > 800 && window.innerWidth <= 920)
		{
			if (transactionType == "Sell")
			{

				//Update the 3 field css
				//show the button div
				if ($("#cheque-1")[0].checked)
				{
					$("#update-chequeNo1-input-div").css('width', '89%');
					$("#update-chequeNo1-input-div").css('padding-left', '0px');
					$("#update-chequeNo1-input-div").css('padding-right', '5px');
				}
				else
				{
					$("#update-chequeNo1-input-div").css('width', '100%');
					$("#update-chequeNo1-input-div").css('padding-left', '0px');
					$("#update-chequeNo1-input-div").css('padding-right', '0px');
					$(".payment-mode-cheque-1").css('width', '100%');
				}

				if ($("#cheque-2")[0].checked)
				{
					$("#update-chequeNo2-input-div").css('width', '89%');
					$("#update-chequeNo2-input-div").css('padding-left', '0px');
					$("#update-chequeNo2-input-div").css('padding-right', '5px');
				}
				else
				{
					$("#update-chequeNo2-input-div").css('width', '100%');
					$("#update-chequeNo2-input-div").css('padding-left', '0px');
					$("#update-chequeNo2-input-div").css('padding-right', '0px');
				}

				if ($("#cheque-3")[0].checked)
				{
					$("#update-chequeNo3-input-div").css('width', '89%');
					$("#update-chequeNo3-input-div").css('padding-left', '0px');
					$("#update-chequeNo3-input-div").css('padding-right', '5px');
				}
				else
				{
					$("#update-chequeNo3-input-div").css('width', '100%');
					$("#update-chequeNo3-input-div").css('padding-left', '0px');
					$("#update-chequeNo3-input-div").css('padding-right', '0px');
				}

				if ($("#bank-transfer")[0].checked)
				{
					$("#update-local-bank-transfer-input-div").css('width', '89%');
					$("#sales_BankTransferNo").attr('readonly', true);
					$("#sales_BankTransferNo").removeAttr("disabled");
					$("#update-local-bank-transfer-input-div").css('padding-left', '0px');
					$("#update-local-bank-transfer-input-div").css('padding-right', '5px');
					$("#update-local-bank-transfer-div").show();
				}
				else
				{
					$("#update-local-bank-transfer-input-div").css('width', '100%');
					$("#sales_BankTransferNo").attr("disabled", "disabled");
					$("#update-local-bank-transfer-input-div").css('padding-left', '0px');
					$("#update-local-bank-transfer-input-div").css('padding-right', '0px');
					$("#update-local-bank-transfer-div").hide();
				}

			}
			else if(transactionType == "Buy")
			{
				//Update the 3 field css
				//show the button div
				//var checked = $("#" + id);
				$("#update-chequeNo1-input-div").css('padding-left', '0px');
				$("#update-chequeNo1-input-div").css('padding-right', '0px');
				$("#update-chequeNo2-input-div").css('padding-left', '0px');
				$("#update-chequeNo2-input-div").css('padding-right', '0px');
				$("#update-chequeNo3-input-div").css('padding-left', '0px');
				$("#update-chequeNo3-input-div").css('padding-right', '0px');
				$("#update-local-bank-transfer-input-div").css('padding-left', '0px');
				$("#update-local-bank-transfer-input-div").css('padding-right', '0px');
				$("#update-chequeNo1-input-div").css('width', '100%');
				$("#update-chequeNo2-input-div").css('width', '100%');
				$("#update-chequeNo3-input-div").css('width', '100%');
				$("#update-local-bank-transfer-input-div").css('width', '100%');
			}
		}
		else if (window.innerWidth >= 640 && window.innerWidth <= 799)
		{
			if (transactionType == "Sell")
			{

				//Update the 3 field css
				//show the button div
				if ($("#cheque-1")[0].checked)
				{
					$("#update-chequeNo1-input-div").css('width', '88%');
					$("#update-chequeNo1-input-div").css('padding-left', '0px');
					$("#update-chequeNo1-input-div").css('padding-right', '5px');
				}
				else
				{
					$("#update-chequeNo1-input-div").css('width', '100%');
					$("#update-chequeNo1-input-div").css('padding-left', '0px');
					$("#update-chequeNo1-input-div").css('padding-right', '0px');
					$(".payment-mode-cheque-1").css('width', '100%');
				}

				if ($("#cheque-2")[0].checked)
				{
					$("#update-chequeNo2-input-div").css('width', '88%');
					$("#update-chequeNo2-input-div").css('padding-left', '0px');
					$("#update-chequeNo2-input-div").css('padding-right', '5px');
				}
				else
				{
					$("#update-chequeNo2-input-div").css('width', '100%');
					$("#update-chequeNo2-input-div").css('padding-left', '0px');
					$("#update-chequeNo2-input-div").css('padding-right', '0px');
				}

				if ($("#cheque-3")[0].checked)
				{
					$("#update-chequeNo3-input-div").css('width', '88%');
					$("#update-chequeNo3-input-div").css('padding-left', '0px');
					$("#update-chequeNo3-input-div").css('padding-right', '5px');
				}
				else
				{
					$("#update-chequeNo3-input-div").css('width', '100%');
					$("#update-chequeNo3-input-div").css('padding-left', '0px');
					$("#update-chequeNo3-input-div").css('padding-right', '0px');
				}

				if ($("#bank-transfer")[0].checked)
				{
					$("#update-local-bank-transfer-input-div").css('width', '88%');
					$("#sales_BankTransferNo").attr('readonly', true);
					$("#sales_BankTransferNo").removeAttr("disabled");
					$("#update-local-bank-transfer-input-div").css('padding-left', '0px');
					$("#update-local-bank-transfer-input-div").css('padding-right', '5px');
					$("#update-local-bank-transfer-div").show();
				}
				else
				{
					$("#update-local-bank-transfer-input-div").css('width', '100%');
					$("#sales_BankTransferNo").attr("disabled", "disabled");
					$("#update-local-bank-transfer-input-div").css('padding-left', '0px');
					$("#update-local-bank-transfer-input-div").css('padding-right', '0px');
					$("#update-local-bank-transfer-div").hide();
				}

			}
			else if(transactionType == "Buy")
			{
				//Update the 3 field css
				//show the button div
				//var checked = $("#" + id);
				$("#update-chequeNo1-input-div").css('padding-left', '0px');
				$("#update-chequeNo1-input-div").css('padding-right', '0px');
				$("#update-chequeNo2-input-div").css('padding-left', '0px');
				$("#update-chequeNo2-input-div").css('padding-right', '0px');
				$("#update-chequeNo3-input-div").css('padding-left', '0px');
				$("#update-chequeNo3-input-div").css('padding-right', '0px');
				$("#update-local-bank-transfer-input-div").css('padding-left', '0px');
				$("#update-local-bank-transfer-input-div").css('padding-right', '0px');
				$("#update-chequeNo1-input-div").css('width', '100%');
				$("#update-chequeNo2-input-div").css('width', '100%');
				$("#update-chequeNo3-input-div").css('width', '100%');
				$("#update-local-bank-transfer-input-div").css('width', '100%');
			}
		}
		else if (window.innerWidth < 639)
		{
			if (transactionType == "Sell")
			{

				//Update the 3 field css
				//show the button div
				if ($("#cheque-1")[0].checked)
				{
					$("#update-chequeNo1-input-div").css('width', '83%');
					$("#update-chequeNo1-input-div").css('padding-left', '0px');
					$("#update-chequeNo1-input-div").css('padding-right', '5px');
				}
				else
				{
					$("#update-chequeNo1-input-div").css('width', '100%');
					$("#update-chequeNo1-input-div").css('padding-left', '0px');
					$("#update-chequeNo1-input-div").css('padding-right', '0px');
					$(".payment-mode-cheque-1").css('width', '100%');
				}

				if ($("#cheque-2")[0].checked)
				{
					$("#update-chequeNo2-input-div").css('width', '83%');
					$("#update-chequeNo2-input-div").css('padding-left', '0px');
					$("#update-chequeNo2-input-div").css('padding-right', '5px');
				}
				else
				{
					$("#update-chequeNo2-input-div").css('width', '100%');
					$("#update-chequeNo2-input-div").css('padding-left', '0px');
					$("#update-chequeNo2-input-div").css('padding-right', '0px');
				}

				if ($("#cheque-3")[0].checked)
				{
					$("#update-chequeNo3-input-div").css('width', '83%');
					$("#update-chequeNo3-input-div").css('padding-left', '0px');
					$("#update-chequeNo3-input-div").css('padding-right', '5px');
				}
				else
				{
					$("#update-chequeNo3-input-div").css('width', '100%');
					$("#update-chequeNo3-input-div").css('padding-left', '0px');
					$("#update-chequeNo3-input-div").css('padding-right', '0px');
				}

				if ($("#bank-transfer")[0].checked)
				{
					$("#update-local-bank-transfer-input-div").css('width', '83%');
					$("#sales_BankTransferNo").attr('readonly', true);
					$("#sales_BankTransferNo").removeAttr("disabled");
					$("#update-local-bank-transfer-input-div").css('padding-left', '0px');
					$("#update-local-bank-transfer-input-div").css('padding-right', '5px');
					$("#update-local-bank-transfer-div").show();
				}
				else
				{
					$("#update-local-bank-transfer-input-div").css('width', '100%');
					$("#sales_BankTransferNo").attr("disabled", "disabled");
					$("#update-local-bank-transfer-input-div").css('padding-left', '0px');
					$("#update-local-bank-transfer-input-div").css('padding-right', '0px');
					$("#update-local-bank-transfer-div").hide();
				}

			}
			else if(transactionType == "Buy")
			{
				//Update the 3 field css
				//show the button div
				//var checked = $("#" + id);
				$("#update-chequeNo1-input-div").css('padding-left', '0px');
				$("#update-chequeNo1-input-div").css('padding-right', '0px');
				$("#update-chequeNo2-input-div").css('padding-left', '0px');
				$("#update-chequeNo2-input-div").css('padding-right', '0px');
				$("#update-chequeNo3-input-div").css('padding-left', '0px');
				$("#update-chequeNo3-input-div").css('padding-right', '0px');
				$("#update-local-bank-transfer-input-div").css('padding-left', '0px');
				$("#update-local-bank-transfer-input-div").css('padding-right', '0px');
				$("#update-chequeNo1-input-div").css('width', '100%');
				$("#update-chequeNo2-input-div").css('width', '100%');
				$("#update-chequeNo3-input-div").css('width', '100%');
				$("#update-local-bank-transfer-input-div").css('width', '100%');
			}
		}
	});
</script>